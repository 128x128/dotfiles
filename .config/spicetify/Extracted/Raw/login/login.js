(()=>{var e,t={9358:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{ENTER_LOGIN_MODE:()=>_,ENTER_SETTINGS_MODE:()=>S,ENTER_SIGNUP_MODE:()=>m,ENTER_SIGNUP_MODE_STEP_0:()=>h,ENTER_SIGNUP_MODE_STEP_1:()=>E,ENTER_WELCOME_MODE:()=>f,INTERACTION:()=>b,START_APP:()=>g,enterLoginMode:()=>N,enterSettingsMode:()=>C,enterSignupMode:()=>A,enterSignupModeStep0:()=>y,enterSignupModeStep1:()=>D,enterWelcomeMode:()=>I,interaction:()=>O,openSignupPage:()=>k,startApp:()=>T});var r={};n.r(r),n.d(r,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>re,ACCOUNTS_METHODS:()=>oe,LOADING:()=>q,LOGIN_BEFORE:()=>$,LOGIN_CLEAR_ERRORS:()=>j,LOGIN_FAIL:()=>z,LOGIN_SUCCESS:()=>X,LOGIN_TYPE_ACCOUNTS:()=>ae,LOGIN_TYPE_AUTOLOGIN:()=>ne,LOGIN_TYPE_EMAIL:()=>Z,LOGIN_TYPE_FACEBOOK:()=>ee,LOGIN_TYPE_FACEBOOK_POPUP:()=>te,UTM_PARAMETERS:()=>Q,abortLoginWithAccounts:()=>ge,fetchUTMParameters:()=>he,loading:()=>de,login:()=>pe,loginClearErrors:()=>_e,loginFailed:()=>le,loginSuccess:()=>se,loginWithAccounts:()=>ue,loginWithFacebookPopup:()=>me,receivedUTMParameters:()=>Ee});var o={};n.r(o),n.d(o,{CLEAR_ALL_ERRORS:()=>Ge,COUNTRY_NOT_LAUNCHED:()=>Be,FACEBOOK_SIGNUP_ATTEMPT:()=>ve,FACEBOOK_SIGNUP_FAILURE:()=>Re,FACEBOOK_SIGNUP_SUCCESS:()=>we,SIGNUP_ATTEMPT:()=>Oe,SIGNUP_FAILURE:()=>Pe,SIGNUP_RESTRICTIONS_FAILURE:()=>ke,SIGNUP_RESTRICTIONS_SUCCESS:()=>Ce,SIGNUP_SUCCESS:()=>Le,UPDATE_SIGNUP_DATA:()=>xe,VALIDATE_FIELD_ATTEMPT:()=>Fe,VALIDATE_FIELD_FAILURE:()=>Me,VALIDATE_FIELD_SUCCESS:()=>Ue,clearAllErrors:()=>rt,countryNotLaunched:()=>at,facebookSignup:()=>ze,facebookSignupFailure:()=>Qe,facebookSignupSuccess:()=>qe,getSignupRestrictions:()=>We,signup:()=>Ye,signupAttempt:()=>Ke,signupFailure:()=>Xe,signupRestrictionsFailure:()=>He,signupRestrictionsSuccess:()=>Ve,signupSuccess:()=>$e,signupWithAccounts:()=>je,updateSignupData:()=>nt,validateField:()=>Je,validateFieldAttempt:()=>Ze,validateFieldFailure:()=>et,validateFieldSuccess:()=>tt});var i={};n.r(i),n.d(i,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>St,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>ft,SETTINGS_RESTART_CLIENT_FAILURE:()=>yt,SETTINGS_RESTART_CLIENT_SUCCESS:()=>At,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Tt,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>bt,fetchProxySettings:()=>Dt,restartClient:()=>It,updateProxySettings:()=>Nt});var s=n(7294),l=n(3935),d=n(7209),c=n(8216),p=n(2976),u=n(685);const g="START_APP",m="ENTER_SIGNUP_MODE",h="ENTER_SIGNUP_MODE_STEP_0",E="ENTER_SIGNUP_MODE_STEP_1",_="ENTER_LOGIN_MODE",f="ENTER_WELCOME_MODE",S="ENTER_SETTINGS_MODE",b="INTERACTION";function T(){return{type:g}}function A(e=null){return{type:m,actionHash:e}}function y(){return{type:h}}function D(){return{type:E}}function N(e=null){return{type:_,actionHash:e}}function I(e=null){return{type:f,errorMessage:e}}function C(){return{type:S}}function k(e=!1){return(t,n)=>{const a=n();let r,o={};switch(e?"website":"desktop-app"){case"desktop-app":t(A());break;case"website":{o=a.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};const e=Object.keys(o).reduce(((e,t)=>(e[t]=encodeURIComponent(o[t]),e)),{});r=`https://www.spotify.com/signup?utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}`,e.referral&&(r+=`&referral=${e.referral}&referrer=${e.referral}`),window.open(r);break}}}}function O(e,t,n,a,r){return{type:b,page:e,interactionType:t,intent:n,itemId:a,actionHash:r}}const P=e=>n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((t,a)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:a})})):null,L="https://www.spotify.com/redirect/account-page/",v="showSettings",w={id:"UnknownLoginErrorMessage"},R={id:"DefaultErrorMessage",replace:[v]},F={id:"FbFailureOpenPopup",silent:!0},M={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[v]},400:w,401:w,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:w,405:w,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[L]},408:{id:"RegionMismatchMessage",replace:[L,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:w,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:w,415:w,416:w,417:{id:"FacebookCredentialsMisusedMessage"},418:w,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:F,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:F,1005:F,1006:F},U={1:w,2:w,3:{id:"BadCredentialsMessage"},4:w,5:w,6:w,7:w,8:w,9:w},x={1:{silent:!0},2:w,3:w,4:{id:"SessionExpiredMessage"},5:R},B=window.localStorage,G="lastUsername",W="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",V="utmParameters",H=B.getItem(V),Y=B.getItem(G),J={errorData:null,loginInProgress:!1,redirectTo:null,username:Y!==W?Y:"",utmParameters:H?JSON.parse(H):null};const K=function(e=J,t){switch(t.type){case Ct.LOADING:return{...e,loading:!0,throbberDelay:t.throbberDelay};case Ct.LOGIN_FAIL:return{...e,loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1};case Ct.LOGIN_BEFORE:return{...e,errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username};case Ct.LOGIN_SUCCESS:return{...e,loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username};case Ct.UTM_PARAMETERS:return{...e,utmParameters:t.utmParameters};case Ct.LOGIN_CLEAR_ERRORS:return{...e,errorData:null};default:return e}},$="LOGIN_BEFORE",X="LOGIN_SUCCESS",j="LOGIN_CLEAR_ERRORS",z="LOGIN_FAIL",q="LOADING",Q="UTM_PARAMETERS",Z="login",ee="login-facebook",te="login-facebook-popup",ne="autologin",ae="login-accounts",re="abort-login-accounts",oe={facebook:"facebook",apple:"apple",google:"google"};function ie(e,t=Z){return{type:$,errorData:null,username:e||"",loginInProgress:t===Z,loginType:t}}function se(e,t,n=Z,a=!1,r){return{type:X,errorData:null,redirectTo:r,redirectDelay:t||0,username:e,loginType:n,afterSignup:a}}function le(e,t=Z){return{type:z,errorData:e,loginType:t}}function de(e){return{type:q,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}const ce=async(e,t,{defaultErrorCode:n,redirectDelay:a=0}={},r=Z,o=!1,i=null,s=!0)=>{i&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=i);try{const n=JSON.parse(await P(t)).redirectTo||"xpui";let i=null;t&&t.args&&t.args[0]&&(i=t.args[0].username),e(se(s?i:W,a,r,o,n))}catch(t){let a=t;n?a={errorCode:n}:"string"==typeof t&&(a=JSON.parse(t)),a.errorCode&&M[a.errorCode]&&"FbFailureOpenPopup"===M[a.errorCode].id?e(me(i)):e(le(a,r))}};function pe({username:e,password:t,rememberMe:n},a=!1,r=null){return o=>{const i=a?ne:Z;o(ie(n?e:W,i));ce(o,{name:Z,args:[{username:e,password:t,rememberMe:n}]},{redirectDelay:200},i,a,r,n)}}function ue(e,t){return n=>{n(ie(null,ae));ce(n,{name:ae,args:[{method:e,enableSignup:!1}]},{redirectDelay:200},ae,!1,t)}}function ge(){return async()=>{await P({name:re,args:[]})}}function me(e=null){return t=>{t(ie(null,ee));ce(t,{name:te,args:[]},{redirectDelay:200},ee,!1,e)}}function he(){return async e=>{e(Ee(JSON.parse(await P({name:"get-signup-utm-parameters",args:[]}))))}}function Ee(e){return{type:Q,utmParameters:e}}function _e(){return{type:j}}var fe=n(8495),Se=n.n(fe);function be(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function Te(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ae(){const e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"";let t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function ye(e){const t=new Map(Object.entries(e).sort()),n=function(e){const t=Se().create();return e.forEach((e=>{void 0!==e&&t.update(e.toString())})),t.hex()}(t);if(t.size>n.length)return t;const a=[...t],r=[...Array(t.size).keys()].sort((function(e,t){const r=n.charAt(e).localeCompare(n.charAt(t));return 0!==r?r:a[e][0].localeCompare(a[t][0])})),o=new Map;return r.forEach((function(e){o.set(a[e][0],a[e][1])})),o}const De=e=>async(t,n,a)=>{const r=function({name:e,email:t,password:n,gender:a,birthDate:r={},sendEmail:o,shareData:i,agreeEula:s}={},l={utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},d=!1){const c=Object.keys(l).reduce(((e,t)=>(e[t]=encodeURIComponent(l[t]),e)),{});let p=`https://login.app.spotify.com?utm_source=${c.utm_source}&utm_medium=${c.utm_medium}&utm_campaign=${c.utm_campaign}`;c.referral&&(p+=`&referral=${c.referral}&referrer=${c.referral}`);const u={key:be(),displayname:e,email:t,password:n,password_repeat:n,gender:a,birth_year:r.year,birth_month:r.month,birth_day:r.day,iagree:s?1:0,creation_point:p,creation_flow:"desktop",platform:"desktop",referrer:c.referral};return"boolean"==typeof o&&(u["send-email"]=o),"boolean"==typeof i&&(u.thirdpartyemail=i),d&&Object.keys(u).forEach((e=>{void 0===u[e]&&delete u[e]})),ye(u)}(t,n,a),o=new FormData;r.forEach(((e,t)=>{o.append(t,e)}));const i=[Te(),Ae()].reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),s={method:"POST",body:o,headers:{"App-Platform":i["App-Platform"],"Spotify-App-Version":i["Spotify-App-Version"],"X-Client-Id":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.SPOTIFY_CLIENT_ID}},l=new Request(e,s);((e,t)=>{const n=e.headers.get("content-type");e.headers.set("content-type",((e,t)=>[...e.split(";"),t].join(";"))(n,t))})(l,"charset=utf-8");const d=await fetch(l),{errors:c,...p}=await d.json()||{};if(c)throw c;return p},Ne=De("https://spclient.wg.spotify.com/signup/public/v1/account/"),Ie=De("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true");const Ce="SIGNUP_RESTRICTIONS_SUCCESS",ke="SIGNUP_RESTRICTIONS_FAILURE",Oe="SIGNUP_ATTEMPT",Pe="SIGNUP_FAILURE",Le="SIGNUP_SUCCESS",ve="FACEBOOK_SIGNUP_ATTEMPT",we="FACEBOOK_SIGNUP_SUCCESS",Re="FACEBOOK_SIGNUP_FAILURE",Fe="VALIDATE_FIELD_ATTEMPT",Me="VALIDATE_FIELD_FAILURE",Ue="VALIDATE_FIELD_SUCCESS",xe="UPDATE_SIGNUP_DATA",Be="COUNTRY_NOT_LAUNCHED",Ge="CLEAR_ALL_ERRORS";function We(){return async(e,t)=>{const n=t();try{e(Ve(window.__spotify&&!0===window.__spotify.is_running_on_teamcity?{}:await(async()=>{const e=await fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1"),t=await e.json()||{};if(t.errors&&t.errors.length>0)throw t.errors;return t})()))}catch(t){e(He(t)),n.app&&n.app.mode&&"welcome"!==n.app.mode&&(e(N()),e(k(!0)))}}}function Ve(e){return{type:Ce,restrictions:e}}function He(e){return{type:ke,error:e}}function Ye(e=null){return async(t,n)=>{t(Ke());const a=n().signup.formData,r=n().login.utmParameters;try{await Ne(a,r),t($e());const{email:n,password:o}=a;t(pe({username:n,password:o,rememberMe:!0},!0,e))}catch(e){const n={};Object.keys(e).forEach((t=>{n["birthdate"===t?"birthDate":t]={message:e[t]}})),t(Xe(n))}}}function Je(e){return async(t,n)=>{const a=n().signup.formData[e],r=n().login.utmParameters;t(Ze(e,a));try{await Ie({[e]:a},r,!0)}catch(n){n[e]&&t(et(e,{message:n[e]}))}}}function Ke(){return{type:Oe}}function $e(){return{type:Le}}function Xe(e){return{type:Pe,errors:e}}function je(e,t=null){return n=>{const a={name:ae,args:[{method:e,enableSignup:!0}]};n(ze()),(async(e,t,n=null)=>{n&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=n);try{const n=JSON.parse(await P(t)).redirectTo||"xpui";e(qe()),e(se(null,0,ne,!0,n))}catch(t){let n=t;"string"==typeof t&&(n=JSON.parse(t)),e(Qe(n))}})(n,a,t)}}function ze(){return{type:ve}}function qe(){return{type:we}}function Qe(e){return{type:Re,errorData:e}}function Ze(e,t){return{type:Fe,field:e,value:t}}function et(e,t){return{type:Me,field:e,error:t}}function tt(e){return{type:Ue,field:e}}function nt(e){return{type:xe,data:e}}function at(){return{type:Be}}function rt(){return{type:Ge}}let ot,it,st;!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th_TH",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(ot||(ot={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(it||(it={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(st||(st={}));let lt={};function dt(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}const ct=e=>"ar"===e?"ar-u-nu-latn":e;const pt=new class{_relativeTimeFormat=void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat;_dateTimeFormats=new Map;constructor(){this._dictionary={},this._locale=ot.en}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));let n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(ct(this._locale),e),this._dateTimeFormats.set(t,n)),n}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e,this._dateTimeFormats.clear()}getLocale(){return this._locale}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._locale)}get(e,...t){const n=e in this._dictionary?this._dictionary[e]:e;let a="";if("string"!=typeof n){const e=t[0],r=((e,t)=>{try{return(lt[e]||(lt[e]=new Intl.PluralRules(e))).select(t)}catch{return st.OTHER}})(this._locale,parseInt(e,10)),o=n[r];void 0!==o?a=o:n.other&&(a=n.other)}else a=n;if(/%\d%/.test(a)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if(t?.length>0)for(let e=0;e<t.length;e++){const n=t[e];if(null!=n)if("string"==typeof n)a=a.replace(`{${e}}`,dt(n)).replace(`%${e}%`,dt(n));else if("number"==typeof n){const t=this.formatNumber(n);a=a.replace(`{${e}}`,t).replace(`%${e}%`,t)}else if("object"==typeof n)for(const e of Object.keys(n)){const t=n[e];a=a.replace(`%${e}%`,dt(t))}}return a}getSeparator(){switch(this._locale){case ot.ar:return it.AR;case ot.fa:return it.FA;default:return it.EN}}formatNumber(e,t){return e.toLocaleString(ct(this._locale),t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null){const n=new Date(Date.now()),a=(e=new Date(e)).getTime()-n.getTime();if(Math.abs(a)<2592e6&&null!==this._relativeTimeFormat){const{days:e,hours:t,minutes:n,seconds:o}=(r=a,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24)});return e||t||n?e||t?e?this._relativeTimeFormat.format(e,"days"):this._relativeTimeFormat.format(t,"hours"):this._relativeTimeFormat.format(n,"minutes"):this._relativeTimeFormat.format(o,"seconds")}var r;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=ot.en,lt={}}},ut=2,gt=3,mt=4,ht={"auto-detect":{label:()=>pt.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>pt.get("desktop.settings.proxy.noproxy")},http:{label:()=>pt.get("desktop.settings.proxy.http")},socks4:{label:()=>pt.get("desktop.settings.proxy.socks4")},socks5:{label:()=>pt.get("desktop.settings.proxy.socks5")}},Et=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],_t="sp://proxy/v1/";const ft="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",St="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",bt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Tt="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",At="SETTINGS_RESTART_CLIENT_SUCCESS",yt="SETTINGS_RESTART_CLIENT_FAILURE";function Dt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:_t}),persistent:!1,onSuccess:n=>{const a=JSON.parse(n);200!==a.status&&t(new Error(`Failed to fetch proxy settings (status code: ${a.status})`));const r=JSON.parse(a.body);e({mode:r["network.proxy.mode"],address:r["network.proxy.addr"],username:r["network.proxy.user"],password:r["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then((t=>{e(function(e){return{type:ft,data:e}}(t))}),(t=>{e(function(e){return{type:St,error:e}}(t))}))}}function Nt(e){return t=>{(async function(e){return new Promise(((t,n)=>{const a={"network.proxy.mode":e.mode};[ut,gt,mt].includes(e.mode)&&(a["network.proxy.addr"]=e.address,a["network.proxy.user"]=e.username),[ut,mt].includes(e.mode)&&(a["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:_t,body:JSON.stringify(a)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>{t({type:bt}),t(Dt())}),(e=>{t(function(e){return{type:Tt,error:e}}(e))}))}}function It(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))})().then((()=>{e({type:At})}),(t=>{e(function(e){return{type:yt,error:e}}(t))}))}}const Ct={...a,...r,...o,...i};class kt extends s.Component{constructor(e){super(e),this.state={hidden:this.props.delay>0}}componentDidMount(){!0===this.state.hidden&&(this.throbberTimeout=setTimeout((()=>{this.setState({hidden:!1})}),this.props.delay))}componentWillUnmount(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}render(){return this.state.hidden?null:s.createElement("div",{"data-testid":"glue-throbber",className:"GlueThrobber "+(this.props.initial?"throbber-initial":"throbber")},s.createElement("div",null))}}kt.defaultProps={delay:0,initial:!0};var Ot=n(2808),Pt=n.n(Ot);function Lt(){return Pt().create().toString()}var vt=n(6668),wt=n(9450);class Rt extends s.PureComponent{constructor(e){super(e),this.handleLoginClick=this.handleLoginClick.bind(this),this.handleErrorClick=this.handleErrorClick.bind(this)}handleLoginClick(){const e=Lt();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}handleErrorClick(e){if(e.target.getAttribute("data-action")){"showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage()}}render(){const{errorMessage:e}=this.props;return s.createElement("main",{className:"Welcome","data-testid":"welcome"},s.createElement("h1",{className:"HeroText __welcome"},pt.get("desktop-auth.login.millions-of-songs"),s.createElement("br",null),pt.get("desktop-auth.login.free-on-spotify")),s.createElement("div",{className:"Welcome__signup-or-login"},e&&s.createElement("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive"},s.createElement(vt.l,{className:"Welcome__error-message__icon"}),s.createElement("span",{dangerouslySetInnerHTML:{__html:e}})),s.createElement(wt.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0},pt.get("desktop.login.LoginButton"))))}}const Ft=(0,c.$j)((e=>({errorMessage:e.app.errorMessage})),(e=>({openLoginPage:t=>e(Ct.enterLoginMode(t)),openSettingsPage:()=>e(Ct.enterSettingsMode()),onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o))})))(Rt);var Mt=n(7873),Ut=n(4657),xt=n(1770),Bt=n(4184),Gt=n.n(Bt);function Wt(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;let a=M;switch(e){case"session":a=U;break;case"desktop_login_accounts":a=x}const r=a[t]||R;if(r.silent)return!1;const o=r.replace||[];let i="";switch(r.id){case"UnknownLoginErrorMessage":i=pt.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":i=pt.get("desktop.login.DefaultErrorMessage",o[0]);break;case"SessionTerminatedMessage":i=pt.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":i=pt.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":i=pt.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":i=pt.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":i=pt.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":i=pt.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":i=pt.get("desktop.login.ErrorProxyAuthRequired",o[0]);break;case"CriticalUpdate":i=pt.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":i=pt.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":i=pt.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":i=pt.get("desktop.login.MissingUserInfoMessage",o[0]);break;case"RegionMismatchMessage":i=pt.get("desktop.login.RegionMismatchMessage",o[0],o[1]);break;case"PremiumUsersOnlyMessage":i=pt.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":i=pt.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":i=pt.get("desktop.login.ClientUpdateFail",o[0]);break;case"FbUserNotFoundSignUp":i=pt.get("desktop.login.FbUserNotFoundSignUp",o[0])}return`${i}<br>${pt.get("desktop.login.errorCode",n)}`}function Vt({validity:e={}}){return e.valid?null:["valueMissing","typeMismatch","tooShort"].find((t=>e[t]))}const Ht=()=>s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"}));class Yt extends s.PureComponent{render(){const{errorMessage:e}=this.props;return s.createElement("div",{"aria-live":"polite",className:Gt()("FieldError",{"FieldError--hidden":!e})},s.createElement(Ht,null),s.createElement("span",null,e||""))}}let Jt=0;class Kt extends s.PureComponent{constructor(...e){super(...e),this.idNumber=++Jt,this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e)}render(){const{label:e,placeholderLabel:t,name:n,type:a,isRequired:r,taId:o,id:i,defaultValue:l,value:d,minLength:c,autoFocus:p,hasError:u,isDisabled:g,isHiddenForScreenReaders:m,useCustomStyle:h,className:E,inputClassName:_,inputRef:f,onBlur:S,onFocus:b,onInput:T,onKeyDown:A,onKeyUp:y}=this.props,D=i||`GlueTextInput-${this.idNumber}`;return s.createElement("label",{className:h?E:"GlueTextInput",htmlFor:D,"aria-label":e,"aria-hidden":!!m||void 0},s.createElement("input",{className:h?_:Gt()("GlueTextInput__input",{"GlueTextInput__input--has-error":u}),tabIndex:m?"-1":void 0,type:a,id:D,name:n,"data-ta-id":o,"aria-invalid":u,disabled:g,minLength:c,autoFocus:p,placeholder:t||e,value:l?void 0:d,defaultValue:l,onBlur:S,onFocus:b,onChange:this.handleChange,onInput:l?void 0:T,onKeyDown:A,onKeyUp:y,ref:f,required:r}))}}Kt.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur(){},onFocus(){},onChange(){},onInput(){},onKeyDown(){}};class $t extends s.PureComponent{constructor(e){super(e),this.state={isEditing:!1,passwordVisible:!1},this.handleBlur=this.handleBlur.bind(this),this.handleInput=this.handleInput.bind(this)}handleBlur({target:e,relatedTarget:t}){this.setState({isEditing:!1}),t&&(t.name||"submit"===t.type)&&this.validate(e)}handleInput(){this.setState({isEditing:!0})}handleTogglePasswordVisible=()=>{const e=!this.state.passwordVisible;this.setState({passwordVisible:e}),this.props.onTogglePasswordVisibility&&this.props.onTogglePasswordVisibility(e)};validate(e){const{name:t,onValidate:n,noValidate:a}=this.props;!a&&n&&n(t,Vt(e))}renderPasswordEyeToggler(){const{type:e}=this.props,{passwordVisible:t}=this.state;return"password"!==e?null:s.createElement(s.Fragment,null,s.createElement("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon "+(t?"passwordVisible":"")}),s.createElement("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross "+(t?"passwordVisible":"")}))}render(){const{error:e={},noValidate:t,label:n,name:a,type:r,value:o,isRequired:i,minLength:l,autoFocus:d,isDisabled:c,onChange:p,onKeyUp:u,onFocus:g,rightIcon:m=null}=this.props,{isEditing:h,passwordVisible:E}=this.state,_=m;let f=r;return"password"===r&&E&&(f="text"),s.createElement("div",{className:Gt()("FormField",{"FormField--no-validate":t})},s.createElement(Kt,{label:n,name:a,type:f,taId:`${a}-field`,value:o,isRequired:i,minLength:l,autoFocus:d,hasError:!!e.message&&!h,isDisabled:c,onChange:p,onFocus:g,onKeyUp:u,onBlur:this.handleBlur,onInput:this.handleInput}),_&&s.createElement(_,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!t&&!h&&e.message&&s.createElement(s.Fragment,null,s.createElement(Yt,{errorMessage:e.message})))}}const Xt=(0,c.$j)((()=>({})),(()=>({})))($t);var jt=n(7462);class zt extends s.PureComponent{constructor(...e){super(...e),this.handleBlur=this.handleBlur.bind(this)}handleBlur(e={}){this.props.onBlur&&this.props.onBlur(e)}render(){const{type:e="text",name:t,label:n,classes:a,hasError:r,...o}=this.props,i=`${t}-field`;return s.createElement("span",{className:a},s.createElement("label",{className:"glue-hidden-visually",htmlFor:i},n),s.createElement("input",(0,jt.Z)({},o,{onBlur:this.handleBlur,type:e,name:t,id:i,"data-ta-id":i,className:Gt()("form-control Input",{"Input--has-error":r}),"aria-invalid":!!r,placeholder:n,required:!0})))}}const qt=(new Date).getFullYear()-120,Qt=[31,28,31,30,31,30,31,31,30,31,30,31],Zt=(e,t,n)=>{const a=new Date(n,t-1,e);return!(e<1||e>((e,t)=>1===e&&t%4==0?29:Qt[e])(t,n))&&(!(a.getFullYear()<qt)&&(a.getDate()===e&&a.getMonth()===t-1&&a.getFullYear()===n))},en=(e,t,n)=>{let a=null;return((e,t,n)=>[e,t,n].reduce(((e,t)=>e&&!!t),!0))(e,t,n)?Zt(e,t,n)||(a="invalid"):a="incomplete",a},tn={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"};class nn extends s.PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.monthStrings=[pt.get("desktop.login.January"),pt.get("desktop.login.February"),pt.get("desktop.login.March"),pt.get("desktop.login.April"),pt.get("desktop.login.May"),pt.get("desktop.login.June"),pt.get("desktop.login.July"),pt.get("desktop.login.August"),pt.get("desktop.login.September"),pt.get("desktop.login.October"),pt.get("desktop.login.November"),pt.get("desktop.login.December")],this.handleInput=this.handleInput.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleInput({target:{name:e,value:t,validity:n={}}}){this.setState({isEditing:!0});const a=parseInt(t,10);n.valueMissing||!isFinite(t)||isNaN(a)?this.props.onChange({...this.props.value,[e]:void 0}):this.props.onChange({...this.props.value,[e]:a})}handleBlur(e){const t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}handleFocus(e){this.setState({isEditing:!0});const t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}validate(){const{day:e,month:t,year:n}=this.props.value,a=en(e,t,n,this.props.minAge);this.props.onValidate("birthDate",a)}renderYear(e,t,n){return s.createElement(zt,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:pt.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:qt,hasError:t.includes("year"),onFocus:this.handleFocus})}renderMonth(e,t,n){return s.createElement("select",{name:"month",id:"month-field",className:Gt()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus},s.createElement("option",{value:"",disabled:!0,hidden:!0},pt.get("desktop.login.Month")),this.monthStrings.map(((e,t)=>s.createElement("option",{value:t+1,key:t},e))))}renderDay(e,t,n){return s.createElement(zt,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:pt.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}render(){const{name:e,label:t,dateEndianness:n,error:a={},autoFocus:r}=this.props,{day:o,month:i,year:l}=this.props.value,{isEditing:d}=this.state,c=["day","month","year"].filter((e=>!(d||!a.message)&&("incomplete"===a.code?!this.props.value[e]:"tooOld"!==a.code||"year"===e)));let p="";return p="big"===tn[n]?s.createElement("div",{className:"FormDate__inputs"},this.renderYear(l,c,r),this.renderMonth(i,c),this.renderDay(o,c)):"little"===tn[n]?s.createElement("div",{className:"FormDate__inputs"},this.renderDay(o,c,r),this.renderMonth(i,c),this.renderYear(l,c)):s.createElement("div",{className:"FormDate__inputs"},this.renderMonth(i,c,r),this.renderDay(o,c),this.renderYear(l,c)),s.createElement("div",{className:"FormDate"},s.createElement("label",{className:`FormDate__label ${e}-label`,htmlFor:"month-field"},t),p,!d&&a.message&&s.createElement(s.Fragment,null,s.createElement(Yt,{errorMessage:a.message})))}}nn.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const an=(0,c.$j)((()=>({})),(()=>({})))(nn);class rn extends s.PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleBlur(e){this.state={isEditing:!1};(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}handleFocus(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}validate(e){const{name:t,onValidate:n}=this.props;n&&n(t,Vt(e))}render(){const{name:e,label:t,options:n,value:a,showTitle:r,error:o={},onValidate:i,onOptionFocus:l,...d}=this.props,{isEditing:c}=this.state,p=`${e}-field`,u=Gt()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return s.createElement("div",{className:u},s.createElement("label",{className:r?"":"glue-hidden-visually",htmlFor:p},t),n.map((t=>{const n=`${t.value}-radio`;return s.createElement("span",{className:a===t.value?"checked":"",key:t.value},s.createElement("input",(0,jt.Z)({},d,{name:e,type:"radio",id:n,className:"glue-hidden-visually",value:t.value,checked:a===t.value,onBlur:this.handleBlur,onFocus:this.handleFocus,required:!0,disabled:this.props.disabled})),s.createElement("label",{className:Gt()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!o.message}),htmlFor:n},t.label))})),!c&&o.message&&s.createElement(s.Fragment,null,s.createElement(Yt,{errorMessage:o.message})))}}const on=(0,c.$j)((()=>({})),(()=>({})))(rn);class sn extends s.PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.isDisabled||this.props.onChange(e.target.checked)}render(){const e=`${this.props.name}-field`,t=Gt()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return s.createElement("div",{className:t},s.createElement("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),s.createElement("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}}))}}sn.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange(){}};class ln extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){if(e.target.getAttribute("data-action")){const t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}render(){const e=this.props.errorData,t=e?Wt(e.errorCategory,e.errorCode,e.errorReference):null;return t?s.createElement("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick},s.createElement(vt.l,{iconSize:24}),s.createElement("span",{dangerouslySetInnerHTML:{__html:t}})):null}}const dn=(0,c.$j)((e=>{let{mode:t}=e.app;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(e=>({openSettingsPage:()=>e(Ct.enterSettingsMode()),openSignupPage:()=>e(Ct.openSignupPage())})))(ln);class cn extends s.PureComponent{static getNextId(){const e=(cn.instanceCount||0)+1;return cn.instanceCount=e,e}constructor(e){super(e),this.state={tosAgreed:!1,privacyAgreed:!1},this.handleTosChange=this.handleTosChange.bind(this),this.handlePrivacyChange=this.handlePrivacyChange.bind(this),this.handleTosAndPrivacyChange=this.handleTosAndPrivacyChange.bind(this),this.handleEulaChange=this.handleEulaChange.bind(this),this.eulaId=cn.getNextId()}handleTosChange(e){this.setState({tosAgreed:e},(()=>{this.handleEulaChange()}))}handlePrivacyChange(e){this.setState({privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleTosAndPrivacyChange(e){this.setState({tosAgreed:e,privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleEulaChange(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}render(){let e=null;const t=`<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">${pt.get("desktop.login.TermsAndConditions")}</a>`,n=`<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">${pt.get("desktop.login.PrivacyPolicy")}</a>`,a=pt.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?s.createElement("div",null,!this.props.hideTermsAndConditions&&s.createElement("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:pt.get("desktop.login.SignupAgree",a,t)}}),!this.props.hidePrivacyPolicy&&s.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:pt.get("desktop.login.PrivacyPolicyAgree",n)}})):this.props.restrictions.can_accept_licenses_in_one_step?s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(sn,{"data-ta-id":"agree-eula",name:`agree-eula-${this.eulaId}`,label:this.props.restrictions.specific_licenses?pt.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):pt.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&s.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:pt.get("desktop.login.PrivacyPolicyAgree",n)}})):s.createElement("div",null,s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(sn,{"data-ta-id":"agree-tos",name:`agree-tos-${this.eulaId}`,label:pt.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})),s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(sn,{"data-ta-id":"agree-privacy",name:`agree-privacy-${this.eulaId}`,label:pt.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled}))),s.createElement("div",{className:"EulaAgreement"},e,this.props.error&&s.createElement(s.Fragment,null,s.createElement(Yt,{errorMessage:this.props.error.message})))}}const pn=(0,c.$j)((()=>({})),(()=>({})))(cn);class un extends s.PureComponent{handleClick=e=>{const{method:t}=this.props;e&&(e.preventDefault(),e.stopPropagation()),this.props.onClick(t)};render(){const{type:e,label:t,isDisabled:n,method:a}=this.props,r=a.substr(0,1).toUpperCase()+a.substr(1),o=Gt()("button","SocialButton",`${r}Button`,{[`${r}Button--login`]:"login"===e,[`${r}Button--signup`]:"signup"===e});return s.createElement("button",{type:"button",className:o,onClick:this.handleClick,"data-ta-id":`${a}-${e}-button`,disabled:n},t)}}class gn extends s.PureComponent{static defaultProps={isDisabled:!1,hideEula:!1};constructor(e){super(e),this.state={eulaAgreed:this.props.restrictions.pretick_eula,error:{}}}handleAgreeEulaChange=e=>{const t=e?"checked":"unchecked";this.props.onInteraction("signup","click",`eula-change-${t}`),this.setState({eulaAgreed:e,error:e?{}:this.state.error})};handleOnClick=(...e)=>{(()=>this.state.eulaAgreed||this.props.restrictions.pretick_eula||this.props.hideEula)()?this.props.onClick(...e):this.setState({error:{message:pt.get("desktop.login.agreeEula.notAccepted")}})};render(){return s.createElement("div",{className:"SignupFacebook"},s.createElement(un,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:pt.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:s.createElement(pn,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange}))}}const mn=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})),(e=>({onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o)),onClick:t=>{const n=Lt();e(Ct.signupWithAccounts(t,n)),e(Ct.interaction("signup","click",`create-account-${t}`,null,n))}})),((e,t)=>({...e,...t,onClick:e=>{t.onClick(e)}})))(gn),hn=({title:e})=>s.createElement("p",{className:"FormTitleSeparator","aria-hidden":"true"},e);hn.defaultProps={title:""};const En=hn;class _n extends s.PureComponent{static defaultProps={errors:{},data:{},step:0};constructor(e){super(e),this.state={isEditing:!0}}handleEmailValidate=(e,t)=>{this.props.onValidate(e,t),t||this.props.validateEmail()};handleEmailFocus=()=>{this.props.onInteraction("signup","click","input-email")};handlePasswordValidate=(e,t)=>{this.props.onValidate(e,t),t||this.props.validatePassword()};handlePasswordFocus=()=>{this.props.onInteraction("signup","click","input-password")};handleNameFocus=()=>{this.props.onInteraction("signup","click","input-name")};handleGenderOptionFocus=e=>{this.props.onInteraction("signup","click",`input-gender-${e}`)};handleInputChange=({target:{name:e,value:t}})=>{this.props.updateData({[e]:t}),this.setState({isEditing:!0})};handleBirthDateChange=e=>{this.props.updateData({birthDate:e})};handleSendEmailChange=e=>{this.props.updateData({sendEmail:e})};handleShareDataChange=e=>{this.props.updateData({shareData:e})};handleAgreeEulaChange=e=>{this.props.updateData({agreeEula:e})};handleSubmit=e=>{e&&e.preventDefault();const{step:t}=this.props,n=Lt();this.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),this.setState({isEditing:!1});let a=!0;const r={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!this.props.errors&&Object.keys(this.props.errors).filter((e=>-1!==r[t].indexOf(e))).some((e=>this.props.errors[e]&&this.props.errors[e].message))&&(a=!1);const o=e=>t=>{this.props.data[t]||(this.props.onValidate(t,{code:e}),a=!1)};switch(t){case 0:["email","password","name"].forEach(o("valueMissing"));break;case 1:{const{day:e,month:t,year:r}=this.props.data.birthDate;r||this.props.onInteraction("signup","view","show-error-empty-year",null,n),t||this.props.onInteraction("signup","view","show-error-empty-month",null,n),e||this.props.onInteraction("signup","view","show-error-empty-date",null,n);const i=en(e,t,r,this.props.restrictions.minimum_age);i&&(this.props.onValidate("birthDate",{code:i}),a=!1),o("valueMissing")("gender"),o("notAccepted")("agreeEula")}}if(a)switch(t){case 0:this.setStep(t+1);break;case 1:this.props.signup(n)}};handleBack=()=>{const{step:e}=this.props;this.props.onInteraction("signup","click",`back-step-${e+1}`),this.props.clearAllErrors(),e<=0?this.props.enterWelcomeMode():this.setStep(e-1)};handleLogin=()=>{const e=Lt();this.props.onInteraction("signup","click","open-page-login",null,e),this.props.enterLoginMode(e)};setStep=e=>{switch(e){case 0:this.props.enterSignupModeStep0();break;case 1:this.props.enterSignupModeStep1()}};renderErrorMsg(){const e=Object.keys(this.props.errors).filter((e=>this.props.errors[e]&&this.props.errors[e].message));return s.createElement("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive"},e.length>0?s.createElement("div",null,s.createElement("p",null,pt.get("desktop.login.email.errorMessageA11y",e.length)),s.createElement("ul",null,e.map((e=>s.createElement("li",{key:e},this.props.errors[e].message))))):null)}renderStep0(){const{data:e,errors:t,isDisabled:n,onValidate:a}=this.props;return s.createElement("div",null,s.createElement(Xt,{name:"email",type:"email",label:pt.get("desktop.login.SignupEmail"),value:e.email,onChange:this.handleInputChange,isDisabled:n,error:t.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:Mt.B}),s.createElement(Xt,{name:"password",type:"password",label:pt.get("desktop.login.CreateAPassword"),value:e.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:n,error:t.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:e=>{this.props.onInteraction("signup","click",e?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),s.createElement(Xt,{name:"name",label:pt.get("desktop.login.SignupName"),value:e.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:n,error:t.name,onValidate:a,rightIcon:Ut.W,onFocus:this.handleNameFocus}))}renderStep1(){const{data:e,errors:t,restrictions:n,isDisabled:a,onValidate:r}=this.props;let o=null;n.requires_marketing_opt_in_text?o=s.createElement("div",{className:"SignupForm__send-email-implicit"},pt.get("desktop.login.SendEmailImplicitLabel")):n.requires_marketing_opt_in&&(o=s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(sn,{name:"send-email",label:pt.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:e.sendEmail,isDisabled:a})));const i=[{label:pt.get("desktop.login.Female"),value:"female"},{label:pt.get("desktop.login.Male"),value:"male"}];return n.use_all_genders&&i.push({label:pt.get("desktop.login.NonBinary"),value:"neutral"}),s.createElement("div",null,s.createElement(an,{name:"birth-date",label:pt.get("desktop.login.WhatsYourSignupBirthDate"),value:e.birthDate,onChange:this.handleBirthDateChange,disabled:a,error:t.birthDate,onValidate:r,dateEndianness:n.date_endianness,minAge:n.minimum_age,autoFocus:!0,onFocus:()=>{this.props.onInteraction("signup","click","input-birth-date")}}),s.createElement(on,{showTitle:!0,name:"gender",label:pt.get("desktop.login.WhatsYourSignupGender"),options:i,value:e.gender,onChange:this.handleInputChange,disabled:a,error:t.gender,onValidate:r,onOptionFocus:this.handleGenderOptionFocus}),o,s.createElement(pn,{restrictions:n,error:t.agreeEula,disabled:a,onChange:this.handleAgreeEulaChange}))}render(){const{isDisabled:e,step:t}=this.props;return s.createElement("form",{onSubmit:this.handleSubmit,className:"SignupForm"},this.renderErrorMsg(),s.createElement(dn,null),0===t?this.renderStep0():"",1===t?this.renderStep1():"",s.createElement(wt.D,{type:"submit",disabled:e,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0},0===t?pt.get("desktop.login.Continue"):pt.get("desktop.login.SignupButton")),0===t&&s.createElement(s.Fragment,null,s.createElement(En,{title:pt.get("desktop.login.SignupOr")}),s.createElement(mn,null)),s.createElement(xt.oM,{onClick:this.handleBack},pt.get("desktop.login.Back")),0===t&&s.createElement("h3",{className:"FooterFormText"},s.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:pt.get("desktop.login.AlreadyOnSpotifyLogin")}})))}}const fn=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData})),(e=>({signup:t=>e(Ct.signup(t)),enterLoginMode:()=>e(Ct.enterLoginMode()),enterSignupModeStep0:()=>e(Ct.enterSignupModeStep0()),enterSignupModeStep1:()=>e(Ct.enterSignupModeStep1()),updateData:t=>e(Ct.updateSignupData(t)),validateEmail:()=>e(Ct.validateField("email")),validatePassword:()=>e(Ct.validateField("password")),enterWelcomeMode:()=>e(Ct.enterWelcomeMode()),clearAllErrors:()=>e(Ct.clearAllErrors()),onValidate:(t,n)=>{if(n){const a=n.code||n,r={birthDate:{incomplete:pt.get("desktop.login.birthDate.incomplete"),invalid:pt.get("desktop.login.birthDate.invalid")},password:{valueMissing:pt.get("desktop.login.password.valueMissing"),tooShort:pt.get("desktop.login.password.tooShort")},email:{valueMissing:pt.get("desktop.login.email.valueMissing"),typeMismatch:pt.get("desktop.login.email.typeMismatch")},name:{valueMissing:pt.get("desktop.login.name.valueMissing")},gender:{valueMissing:pt.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:pt.get("desktop.login.agreeEula.notAccepted")}};e(Ct.validateFieldFailure(t,{code:a,message:r[t]&&r[t][a]||""}))}else e(Ct.validateFieldSuccess(t))},onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o))})))(_n);class Sn extends s.PureComponent{render(){const{step:e,restrictions:t}=this.props;if(!t)return s.createElement(kt,{delay:2e3});const n=0===e?pt.get("desktop.login.SignupHeroText"):pt.get("desktop.login.SignupAlmostDone");return s.createElement("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form"},s.createElement("h1",{className:"HeroText",id:"signup-form-title"},n),s.createElement(fn,{step:e}))}}const bn=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})))(Sn);class Tn extends s.PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}render(){const{isActive:e,isDisabled:t,labelId:n,taId:a}=this.props;return s.createElement("div",{className:Gt()("GlueToggle",{"GlueToggle--is-active":e,"GlueToggle--is-disabled":t})},s.createElement("input",{type:"checkbox",name:n,id:n,className:"glue-hidden-visually",onChange:this.handleChange,checked:e,disabled:t,"data-ta-id":a}),s.createElement("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true"},s.createElement("div",{className:"GlueToggle__toggle-inner"})))}}Tn.defaultProps={isActive:!1,isDisabled:!1,onChange:()=>{}};class An extends s.PureComponent{render(){const{name:e,label:t,checked:n,disabled:a,onChange:r}=this.props,o=`${e}-field`;return s.createElement("div",{className:"FormToggle"},s.createElement("label",{htmlFor:o,"data-ta-id":"remember-me-label"},t),s.createElement(Tn,{labelId:o,isActive:n,onChange:r,taId:"remember-me-slider",isDisabled:a}))}}class yn extends s.PureComponent{constructor(e){super(e),this.state={username:this.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((e=>{this[e]=this[e].bind(this)}))}handleUsernameChange({target:e}){this.setState({username:e.value})}handleUsernameFocus(){this.props.onInteraction("login","click","input-email")}handlePasswordChange({target:e}){this.setState({password:e.value})}handlePasswordFocus(){this.props.onInteraction("login","click","input-password")}handleRememberMeChange(){this.setState({rememberMe:!this.state.rememberMe})}handleSubmit(e){e&&e.preventDefault();const t=this.state.username.trim(),{password:n,rememberMe:a}=this.state,r=Lt();this.props.onInteraction("login","click","login-email",null,r),t&&n?this.props.login({username:t,password:n,rememberMe:a},!1,r):t?n||this.props.onInteraction("login","view","show-error-empty-password",null,r):this.props.onInteraction("login","view","show-error-empty-email",null,r)}handleForgotPasswordLinkClick=()=>{this.props.onInteraction("login","click","reset-password")};render(){const{isDisabled:e}=this.props;return s.createElement("form",{onSubmit:this.handleSubmit},s.createElement("h3",{className:"glue-hidden-visually"},pt.get("desktop.login.LoginWithEmailTitle")),s.createElement(dn,null),s.createElement(Xt,{name:"username",label:pt.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:Mt.B}),s.createElement(Xt,{name:"password",type:"password",label:pt.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),s.createElement("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick},pt.get("desktop.login.forgotPassLink")),s.createElement(An,{name:"remember-me",label:pt.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),s.createElement("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button"},pt.get("desktop.login.LoginButton")))}}const Dn=(0,c.$j)((e=>({isDisabled:!!e.login.loginInProgress,username:e.login.username})),(e=>({login:(t,n,a)=>e(Ct.login(t,n,a)),onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o))})))(yn);class Nn extends s.PureComponent{componentWillUnmount(){this.props.clearErrors()}handleSignup(){const e=Lt();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}getSignupLink(){return s.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignup(),"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:pt.get("desktop.login.DontHaveAnAccountSignup")}})}render(){const{isDisabled:e}=this.props;return s.createElement("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form"},s.createElement("h1",{className:"HeroText",id:"login-form-title"},pt.get("desktop.login.LoginHeroText")),s.createElement(Dn,null),s.createElement(En,{title:pt.get("desktop.login.SignupOr")}),s.createElement(un,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:pt.get("desktop.login.ContinueWithFacebook")}),s.createElement(un,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:pt.get("desktop.login.ContinueWithGoogle")}),s.createElement(un,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:pt.get("desktop.login.ContinueWithApple")}),s.createElement("h3",{className:"FooterFormText"},this.getSignupLink()))}}const In=(0,c.$j)((e=>({isDisabled:!!e.login.loginInProgress})),(e=>({enterSignupMode:t=>e(Ct.enterSignupMode(t)),onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o)),onSocialButtonClick:t=>{const n=Lt();e(Ct.loginWithAccounts(t,n)),e(Ct.interaction("login","click",`login-${t}`,null,n))},clearErrors:()=>e(Ct.loginClearErrors())})),((e,t)=>({...e,...t,onSocialButtonClick:e=>{t.onSocialButtonClick(e)}})))(Nn);class Cn extends s.PureComponent{render(){const{operationUsed:e}=this.props,t="signup"===e?pt.get("desktop-auth.login.redirecting-to-browser-signup"):pt.get("desktop-auth.login.redirecting-to-browser-login");return s.createElement("main",null,s.createElement("h1",{className:"HeroText __redirect"},t))}}const kn=(0,c.$j)((e=>({operationUsed:e.experimentWebAuthReducer.operationUsed})))(Cn);var On=n(4209);const Pn="zrvvPyoxE6wQNqnu0yWA",Ln=({value:e,id:t,children:n,disabled:a,onSelect:r,className:o,dir:i})=>s.createElement("span",{className:o},s.createElement("select",{className:Pn,value:e?.toString(),id:t,disabled:a,onBlur:()=>{},onChange:e=>{r(e.target.value)},dir:i},n));var vn=n(7763),wn=n.n(vn),Rn=n(8760);n(7661);n(7762);var Fn=n(9518),Mn=n.n(Fn);Mn().Type.ALBUM,Mn().Type.ARTIST,Mn().Type.COLLECTION_ALBUM,Mn().Type.COLLECTION_ARTIST,Mn().Type.DAILY_MIX,Mn().Type.EPISODE,Mn().Type.FOLDER,Mn().Type.LOCAL,Mn().Type.LOCAL_ALBUM,Mn().Type.LOCAL_ARTIST,Mn().Type.PLAYLIST,Mn().Type.PLAYLIST_V2,Mn().Type.PROFILE,Mn().Type.SHOW,Mn().Type.STATION,Mn().Type.TRACK;const Un=(0,s.createContext)("");Un.Provider,Un.Consumer;let xn;!function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right"}(xn||(xn={}));var Bn=n(8977);const Gn=({fallback:e,children:t})=>s.createElement(s.Suspense,{fallback:e},t),Wn={error:null,info:null};class Vn extends s.Component{state=Wn;constructor(...e){super(...e);const{history:t}=this.props;this.unlisten=t.listen((()=>{this.state.error&&this.setState(Wn)}))}componentWillUnmount(){this.unlisten()}componentDidCatch(e,t){const{onError:n}=this.props;if("function"==typeof n)try{n.call(this,e,t?t.componentStack:"")}catch(e){}this.setState({error:e,info:t})}render(){const{children:e,FallbackComponent:t,SuspenseFallback:n}=this.props,{error:a,info:r}=this.state;return null!==a?s.createElement(t,{componentStack:r?r.componentStack:"",error:a}):s.createElement(Gn,{fallback:n},e)}}Vn.defaultProps={FallbackComponent:({componentStack:e,error:t})=>!1,SuspenseFallback:null};(0,Bn.EN)(Vn);["autoplay","clipboard-write","encrypted-media","fullscreen","picture-in-picture"].join("; ");n(4485);const Hn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageURLAndSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSource"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]},Yn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageURLAndSize"}}]}}]}}]},Jn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"extractedColors"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]},Kn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"extractedColorsAndImageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extractedColors"}},{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]},$n=JSON.parse('{"WEB_API_URL":"https://api.spotify.com","SPCLIENT_WG_URL":"https://spclient.wg.spotify.com","EXP_WG_ENDPOINT":"https://exp.wg.spotify.com","ACCOUNTS_HOST":"https://accounts.spotify.com","PARTNER_API_ENDPOINT":"https://api-partner.spotify.com"}'),{WEB_API_URL:Xn,SPCLIENT_WG_URL:jn,PARTNER_API_ENDPOINT:zn,ACCOUNTS_HOST:qn}=$n;Error;var Qn=n(3253),Zn=n.n(Qn);const ea=e=>{const{isOpen:t,contentLabel:n,children:a,className:r,overlayClassName:o,animated:i,animation:l,...d}=e;let c;return i?c=300:l.closeTimeoutMs&&(c=l.closeTimeoutMs),s.createElement(Zn(),(0,jt.Z)({className:{base:Gt()("GenericModal","encore-dark-theme",{"GenericModal--animated":i,[l.modal.base]:l.modal.base,[r]:r}),afterOpen:Gt()("",{"GenericModal--afterOpen":i,[l.modal.afterOpen]:l.modal.afterOpen}),beforeClose:Gt()("",{"GenericModal--beforeClose":i,[l.modal.beforeClose]:l.modal.beforeClose})},overlayClassName:{base:Gt()("GenericModal__overlay",{"GenericModal__overlay--animated":i,[l.overlay.base]:l.overlay.base,[o]:o}),afterOpen:Gt()("",{"GenericModal__overlay--afterOpen":i,[l.overlay.afterOpen]:l.overlay.afterOpen}),beforeClose:Gt()("",{"GenericModal__overlay--beforeClose":i,[l.overlay.beforeClose]:l.overlay.beforeClose})},bodyOpenClassName:"GenericModal__Body--open",isOpen:t},c?{closeTimeoutMS:c}:{},{shouldFocusAfterRender:!0,ariaHideApp:!1,contentLabel:n},d),a)};ea.defaultProps={animation:{modal:{base:void 0,afterOpen:void 0,beforeClose:void 0},overlay:{base:void 0,afterOpen:void 0,beforeClose:void 0},closeTimeoutMs:0}};n(1716);new Error("Report API used without being initialized.\n   Did you provide the context in a a parent component?'");let ta;!function(e){e.ERROR="ERROR",e.NOTICE="NOTICE"}(ta||(ta={}));"undefined"!=typeof navigator&&navigator.onLine;n(3178);let na,aa,ra,oa,ia;!function(e){e.ALBUMS="albums",e.ARTISTS="artists",e.SHOWS="shows",e.TRACKS="tracks",e.EPISODES="episodes",e.BOOKS="books"}(na||(na={})),function(e){e.ADD="add",e.REMOVE="remove"}(aa||(aa={})),function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(ra||(ra={}));!function(e){e.ADD="add",e.REMOVE="remove",e.CREATE_PLAYLIST="create_playlist"}(oa||(oa={})),function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(ia||(ia={}));n(6848);var sa=n(4098),la=n(4139),da=n.n(la);n(8599);da()(sa.fetch);let ca,pa;!function(e){e.CONTEXT_DESCRIPTION="context_description",e.IS_AUDIOBOOK="is_audiobook",e.REPORTING_URI="reporting.uri",e.FILTERING_PREDICATE="filtering.predicate",e.SORTING_CRITERIA="sorting.criteria",e.LIST_UTIL_FILTER="list_util_filter",e.LIST_UTIL_SORT="list_util_sort"}(ca||(ca={})),function(e){e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.USER_PODCAST="user-podcast",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.RADIO="radio",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes"}(pa||(pa={}));pa.UNKNOWN,pa.ALBUM,pa.ARTIST;let ua,ga,ma,ha,Ea,_a,fa,Sa;!function(e){e[e.NOT_ACTIVE=0]="NOT_ACTIVE",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED"}(ua||(ua={})),function(e){e[e.REPEAT_NONE=0]="REPEAT_NONE",e[e.REPEAT_CONTEXT=1]="REPEAT_CONTEXT",e[e.REPEAT_TRACK=2]="REPEAT_TRACK"}(ga||(ga={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e[e.HIFI=5]="HIFI"}(ma||(ma={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BEST_MATCHING=1]="BEST_MATCHING",e[e.BACKEND_ADVISED=2]="BACKEND_ADVISED",e[e.OFFLINED_FILE=3]="OFFLINED_FILE",e[e.CACHED_FILE=4]="CACHED_FILE",e[e.LOCAL_FILE=5]="LOCAL_FILE"}(ha||(ha={})),function(e){e[e.NONE=0]="NONE",e[e.OFF=1]="OFF",e[e.ON=2]="ON"}(Ea||(Ea={})),function(e){e.UPDATE="update",e.ERROR="error",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete",e.QUEUE_UPDATE="queue_update",e.CONTEXT_WRAPAROUND="context_wraparound"}(_a||(_a={})),function(e){e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious"}(fa||(fa={})),function(e){e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder"}(Sa||(Sa={}));n(8821),n(1299);let ba,Ta;!function(e){e.ADD="add",e.MOVE="move",e.REMOVE="remove",e.UPDATE="update",e.SET_COLLABORATIVE="set_collaborative"}(ba||(ba={})),function(e){e.UPDATE="update",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(Ta||(Ta={}));n(7577);var Aa=n(3578);let ya,Da,Na,Ia,Ca,ka,Oa;!function(e){e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER"}(ya||(ya={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Da||(Da={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Na||(Na={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ia||(Ia={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ca||(Ca={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(ka||(ka={})),function(e){e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb"}(Oa||(Oa={}));(0,Aa.JP)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,Aa.JP)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,Aa.z8)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,Aa.JP)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!1}),(0,Aa.JP)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,Aa.JP)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!1}),(0,Aa.JP)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!1}),(0,Aa.JP)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,Aa.z8)({name:"betamaxSdkRebufferingGoal",description:"Sets the buffer goal (in seconds) required before starting/resuming playback video on betamax SDK",upper:100,lower:0,default:4}),(0,Aa.z8)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,Aa.JP)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!1}),(0,Aa.z8)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,Aa.JP)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,Aa.JP)({name:"enableConnectEsperanto",description:"Enables the usage of the Esperanto Connect API",default:!1}),(0,Aa.JP)({name:"showFriendFeed",description:"Shows the friend feed",default:!0}),(0,Aa.JP)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0}),(0,Aa.JP)({name:"playAtFirstTap",description:"Load context to enable play button on first load",default:!1}),(0,Aa.JP)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),(0,Aa.VL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:ya,default:ya.DISABLED}),(0,Aa.JP)({name:"enableLibraryGraphQL",description:"Use the `LibraryGraphQL` implementation using Pathfinder instead of Web API",default:!1}),(0,Aa.JP)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,Aa.JP)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,Aa.JP)({name:"enableTrendingView",description:"Enable the trending view experiment",default:!1}),(0,Aa.VL)({name:"enableInternalTrackLinks",description:"Enable entity pages to have internal links to the track page",values:Da,default:Da.DEFAULT}),(0,Aa.VL)({name:"enableMultiVisit",description:"Multi Visit AA test",values:Na,default:Na.DEFAULT}),(0,Aa.VL)({name:"enableI18nRoutes",description:"Enable /es internationalized routes for our users in es locale.",values:Ia,default:Ia.DEFAULT}),(0,Aa.VL)({name:"enableRichAlbumPage",description:"Enable the rich album page that has more content",values:Ca,default:Ca.DEFAULT}),(0,Aa.JP)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,Aa.JP)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,Aa.VL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:Oa,default:Oa.DEFAULT}),(0,Aa.JP)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,Aa.VL)({name:"enableLyricsAndRichTrackHoldout",description:"Continue monitoring long term effects of Lyrics and Rich Track Pages",values:ka,default:ka.DEFAULT}),(0,Aa.JP)({name:"enableNewTicketingSection",description:"Enable New Ticketing section on Concert Event Pages",default:!1}),(0,Aa.JP)({name:"enableSearchboxInAddToPlaylistMenu",description:"Adds a search box so users are able to filter playlists when trying to add songs to a playlist using the contextmenu",default:!1}),(0,Aa.JP)({name:"enablePlaylistGraphQL",description:"Use the `PlaylistGraphQL` implementation using Pathfinder instead of Web API",default:!1}),(0,Aa.JP)({name:"enableSnakeJazz",description:"Enable the Soundtrap studio integration",default:!1}),(0,Aa.JP)({name:"showServiceUseEsperanto",description:"Enable Esperanto endpoints usage instead of Cosmos ones in Show Service",default:!1});var Pa;let La;!function(e){e.WEBAPI="WEBAPI",e.PATHFINDER="PATHFINDER"}(Pa||(Pa={})),function(e){e.DEFAULT="DEFAULT",e.CALLOUT="CALLOUT",e.ONHOME="ONHOME"}(La||(La={}));(0,Aa.JP)({name:"enablePathfinderForArtistPage",description:"Fetch artist page data from pathfinder",default:!1}),(0,Aa.VL)({name:"podcastMetadataSource",description:"Where to request podcast metadata from",values:Pa,default:Pa.WEBAPI}),(0,Aa.JP)({name:"enableClientXConcertsForArtistPage",description:"Enables the concert features in the Artist page of the web player",default:!1}),(0,Aa.z8)({name:"listen_together_max_number_of_participants",description:"The maximum number of participants allowed in a Listen Together session",lower:2,upper:100,default:6}),(0,Aa.JP)({name:"enableClientXConcertsHub",description:"Enables the concert HUB features in the the web player",default:!1}),(0,Aa.JP)({name:"enableCombinedRecsConcertsHub",description:"Enables combined event recommendations in the Concerts Hub",default:!1}),(0,Aa.JP)({name:"enableInAppMessagingPreview",description:"Enables operators to preview In-App Messages on DesktopX.",default:!1}),(0,Aa.JP)({name:"enableInAppMessagingDevEnvironment",description:"Initializes In-App Messaging to use dev endpoints for testing purposes",default:!1}),(0,Aa.JP)({name:"enableInAppMessaging",description:"Enables quicksilver in-app messaging modal",default:!0}),(0,Aa.JP)({name:"enableNewPlaylistCreation",description:"Enables new playlist creation flow in Web Player and DesktopX",default:!1}),(0,Aa.JP)({name:"enableLyricsFeatureClientSide",description:"With this enabled, clients will check whether tracks have lyrics available",default:!1}),(0,Aa.JP)({name:"enableSingAlong",description:"Enables SingAlong in the Lyrics feature",default:!1}),(0,Aa.JP)({name:"enableInlineCuration",description:"Enables the new inline playlist curation tools",default:!1}),(0,Aa.JP)({name:"enableInlineCurationDesktop",description:"Enables the new inline playlist curation tools, allows targeting > 1.1.53",default:!0}),(0,Aa.JP)({name:"enableUserProfileEdit",description:"Enables editing of user's own profile in Web Player and DesktopX",default:!1}),(0,Aa.JP)({name:"enableSoundbetterSocialLink",description:"Show soundbetter link in the artist about tab when present",default:!1}),(0,Aa.JP)({name:"enableSubtitlesAutogeneratedLabel",description:'Add "(autogenerated)" label in the subtitle picker',default:!1}),(0,Aa.VL)({name:"searchVisibilityTest",description:"Test to improve search visibility",values:La,default:La.DEFAULT}),(0,Aa.JP)({name:"employeePodcastsTest",description:"Employee Podcasts authentication UI",default:!1}),(0,Aa.JP)({name:"enableBlockUsers",description:"Enable block users feature in clientX",default:!1}),(0,Aa.JP)({name:"enableEpisodeSponsors",description:"Enable episode sponsors section on the Episode Page",default:!1}),(0,Aa.z8)({name:"episodeSponsorsFetchDelay",description:"Amount of time to wait after a podcast ad starts streaming before fetching the ad's accompanying display ad",default:4200,lower:3888,upper:4242}),(0,Aa.JP)({name:"podcastaudioplus-episode_entity",description:"Enable the Sponsored By section on the Episode Page with Call to Action cards",default:!1}),(0,Aa.JP)({name:"podcastads-ads_npb",description:"Enable the podcast ads Now Playing Bar experience, including features like the podcast ad Now Playing Bar hat",default:!1}),(0,Aa.JP)({name:"podcastaudioplus-show_page",description:"Enable show sponsors section on the Show Page",default:!1}),(0,Aa.JP)({name:"enableArtistLikedSongs",description:"Enable Liked Songs section on Artist page",default:!1}),(0,Aa.JP)({name:"enableHTMLDescriptions",description:"Enable HTML descriptions for Episodes and Shows",default:!1}),(0,Aa.JP)({name:"enableNewPodcastIndicator",description:"Enable NEW indicator for the latest podcast episode",default:!1}),(0,Aa.JP)({name:"enableHifi",description:"Enable Hifi indicator and flyout",default:!1}),(0,Aa.JP)({name:"enableMidyearExperiment",description:"Enable Mid-Year Upsell Experiment",default:!1}),(0,Aa.JP)({name:"enableMusicAndTalk",description:"Enable music & talk",default:!1}),(0,Aa.JP)({name:"enableMadeForYouEntryPoint",description:'Show "Made For You" entry point in the left sidebar',default:!1}),(0,Aa.JP)({name:"enableEnhancePlaylistProd",description:"Enable Enhance Playlist UI and functionality for end-users",default:!1}),(0,Aa.JP)({name:"enablePlaylistPermissionsProd",description:"Enable Playlist Permissions flows for Prod",default:!1}),(0,Aa.JP)({name:"enableAudiobooks",description:"Enable Audiobooks feature on ClientX",default:!1}),(0,Aa.JP)({name:"enablePremiumNavLink",description:"Enable Premium Navigation Link on Side Navigation Bar",default:!1}),(0,Aa.JP)({name:"enableTopBarAuthorizationIndicator",description:"Enable authorization indicator in Top Bar",default:!1}),(0,Aa.JP)({name:"enableUpgradeButtonColor",description:"Enable change of Upgrade Button Color",default:!1}),(0,Aa.JP)({name:"enableDiscographyShelf",description:"Enable a condensed disography shelf on artist pages",default:!1}),(0,Aa.JP)({name:"enableCovidHubBanner",description:"Display a banner in the Covid-19 hub",default:!1}),(0,Aa.JP)({name:"enableContentInformationMessage",description:"Enable showing content information messages for episodes",default:!1}),(0,Aa.JP)({name:"enableSearchModal",description:"Enable search modal",default:!1}),(0,Aa.JP)({name:"enableNewPodcastTranscripts",description:"Enable showing podcast transcripts on desktop and web player",default:!1}),(0,Aa.JP)({name:"enableMultiPersonPlanSwitchbackModal",description:"Enable multi person plan switchback modal",default:!1}),(0,Aa.JP)({name:"enableNewSearchChips",description:"Enable the new Search with chips experience",default:!1}),(0,Aa.JP)({name:"enableHomeViaGraphQLV2",description:"Enable fetching Home via GraphQL",default:!1}),(0,Aa.JP)({name:"enableInspireCreation",description:"Enable the new Inspire Creation features",default:!1}),(0,Aa.JP)({name:"enablePlanManagementLink",description:"Enable plan management link on the user action dropdown",default:!1}),(0,Aa.JP)({name:"enableEnhanceLikedSongs",description:"Enable Enhance Liked Songs UI and functionality",default:!1}),(0,Aa.JP)({name:"enableNextBestEpisode",description:"Enable the next best episode block on the show page",default:!1}),(0,Aa.JP)({name:"enableIgnoreInRecommendations",description:"Enable Ignore In Recommendations for desktop and web",default:!1}),(0,Aa.JP)({name:"enableLyricsMatch",description:"Enable Lyrics match labels in search results",default:!1});let va;!function(e){e.TITLE="title",e.DESCRIPTION="description",e.NONE="NONE"}(va||(va={}));va.NONE;let wa,Ra,Fa,Ma,Ua,xa,Ba,Ga,Wa;!function(e){e.INDEX="INDEX",e.TITLE="TITLE",e.ARTIST="ARTIST",e.PLAYS="PLAYS",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.RELEASE_DATE="RELEASE_DATE",e.ACTIONS="ACTIONS",e.DURATION="DURATION",e.ALBUM="ALBUM",e.ALBUM_OR_PODCAST="ALBUM_OR_PODCAST",e.ALBUM_OR_SHOW="ALBUM_OR_SHOW",e.EVENT_DATE="EVENT_DATE",e.ADD="ADD"}(wa||(wa={})),function(e){e[e.NONE=0]="NONE",e[e.ASC=1]="ASC",e[e.DESC=2]="DESC",e[e.SECONDARY_ASC=3]="SECONDARY_ASC",e[e.SECONDARY_DESC=4]="SECONDARY_DESC"}(Ra||(Ra={})),function(e){e.TEXT="TEXT"}(Fa||(Fa={})),function(e){e.CONTAINS="CONTAINS"}(Ma||(Ma={})),function(e){e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW"}(Ua||(Ua={})),function(e){e.TITLE="TITLE",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.ARTIST="ARTIST",e.ALBUM="ALBUM",e.DURATION="DURATION"}(xa||(xa={})),function(e){e.ASC="ASC",e.DESC="DESC"}(Ba||(Ba={})),function(e){e.TITLE="TITLE",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.ARTIST="ARTIST",e.ALBUM="ALBUM",e.SHOW="SHOW",e.DURATION="DURATION"}(Ga||(Ga={})),function(e){e.DESC="DESC",e.ASC="ASC"}(Wa||(Wa={}));Ga.TITLE,Ga.ADDED_BY,Ga.ADDED_AT,Ga.ARTIST,Ga.ALBUM,Ga.SHOW,Ga.DURATION,wa.TITLE,xa.TITLE,wa.ADDED_BY,xa.ADDED_BY,wa.ADDED_AT,xa.ADDED_AT,wa.DURATION,xa.DURATION,wa.ALBUM,xa.ALBUM,wa.ALBUM_OR_PODCAST,xa.ALBUM,wa.ALBUM_OR_SHOW,wa.ARTIST,wa.ACTIONS,wa.RELEASE_DATE,wa.INDEX,wa.PLAYS,wa.ADD,wa.EVENT_DATE,wa.TITLE,Ga.TITLE,wa.ADDED_BY,Ga.ADDED_BY,wa.ADDED_AT,Ga.ADDED_AT,wa.DURATION,Ga.DURATION,wa.ALBUM,Ga.ALBUM,wa.ALBUM_OR_PODCAST,Ga.ALBUM,wa.ALBUM_OR_SHOW,wa.ARTIST,wa.ACTIONS,wa.RELEASE_DATE,wa.INDEX,wa.PLAYS,wa.ADD,wa.EVENT_DATE,Ra.NONE,Ra.DESC,Wa.DESC,Ra.ASC,Wa.ASC,Ra.SECONDARY_DESC,Wa.DESC,Ra.SECONDARY_ASC,Wa.ASC,wa.INDEX,wa.TITLE,wa.ALBUM,wa.ADDED_AT,wa.DURATION,wa.INDEX,wa.TITLE,wa.ALBUM,wa.ADDED_BY,wa.ADDED_AT,wa.DURATION,wa.INDEX,wa.TITLE,wa.ALBUM_OR_PODCAST,wa.RELEASE_DATE,wa.ADDED_AT,wa.DURATION,wa.INDEX,wa.TITLE,wa.ALBUM_OR_PODCAST,wa.ADDED_BY,wa.RELEASE_DATE,wa.ADDED_AT,wa.DURATION,wa.INDEX,wa.TITLE,wa.ALBUM,wa.EVENT_DATE,wa.DURATION,wa.INDEX,wa.TITLE,wa.ALBUM,wa.ADDED_BY,wa.DURATION,Ra.NONE,Ra.DESC,Ba.DESC,Ra.ASC,Ba.ASC,Ra.SECONDARY_DESC,Ba.DESC,Ra.SECONDARY_ASC,Ba.ASC;let Va,Ha,Ya,Ja,Ka,$a;!function(e){e.ONLINE="online",e.OFFLINE="offline",e.FORCED_OFFLINE="forced_offline",e.RECONNECTING="reconnecting"}(Va||(Va={})),function(e){e.NO="no",e.YES="yes",e.DOWNLOADING="downloading",e.WAITING="waiting"}(Ha||(Ha={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.DISKFULL=8]="DISKFULL",e[e.DOWNLOAD_EXPIRED=14]="DOWNLOAD_EXPIRED",e[e.TOO_MANY_TRACK=19]="TOO_MANY_TRACK",e[e.LICENSE_SERVER_ERROR=21]="LICENSE_SERVER_ERROR",e[e.LICENSE_LOST=22]="LICENSE_LOST",e[e.NOT_ALLOWED=23]="NOT_ALLOWED",e[e.SYNC_CONNECTION_DISABLED=36]="SYNC_CONNECTION_DISABLED",e[e.LISTS_NOT_SAVED=37]="LISTS_NOT_SAVED",e[e.LISTS_NOT_LOADED=38]="LISTS_NOT_LOADED",e[e.FILE_NOT_FOUND=7001]="FILE_NOT_FOUND",e[e.DOWNLOAD_FILE_FAILED=7002]="DOWNLOAD_FILE_FAILED",e[e.DOWNLOAD_IMAGE_FAILED=7003]="DOWNLOAD_IMAGE_FAILED",e[e.REQUEST_KEY_FAILED=7004]="REQUEST_KEY_FAILED",e[e.SAVE_KEY_STORE_FAILED=7005]="SAVE_KEY_STORE_FAILED",e[e.LOAD_KEY_STORE_FAILED=7006]="LOAD_KEY_STORE_FAILED",e[e.KEY_STORE_NOT_FOUND=7007]="KEY_STORE_NOT_FOUND",e[e.KEY_STORE_BAD_SIZE=7008]="KEY_STORE_BAD_SIZE",e[e.KEY_STORE_BAD_SALT=7010]="KEY_STORE_BAD_SALT",e[e.KEY_STORE_BAD_HMAC=7011]="KEY_STORE_BAD_HMAC",e[e.KEY_STORE_BAD_VERSION=7012]="KEY_STORE_BAD_VERSION",e[e.KEY_STORE_OUT_OF_SYNC=7013]="KEY_STORE_OUT_OF_SYNC",e[e.TOO_MANY_EPISODES=7014]="TOO_MANY_EPISODES",e[e.EPISODE_EXPIRED=7015]="EPISODE_EXPIRED",e[e.SAVE_EPISODE_KEY_STORE_FAILED=7016]="SAVE_EPISODE_KEY_STORE_FAILED",e[e.READ_KEY_STORE_FAILED=7017]="READ_KEY_STORE_FAILED",e[e.DOWNLOAD_HEAD_FILE_FAILED=7018]="DOWNLOAD_HEAD_FILE_FAILED",e[e.DEVICE_LIMIT_REACHED=7028]="DEVICE_LIMIT_REACHED"}(Ya||(Ya={})),function(e){e[e.DOWNLOAD_CAPABILITY=1]="DOWNLOAD_CAPABILITY",e[e.NO_DOWNLOAD_CAPABILITY=2]="NO_DOWNLOAD_CAPABILITY"}(Ja||(Ja={})),function(e){e[e.DOWNLOADING_ALLOWED=1]="DOWNLOADING_ALLOWED",e[e.DOWNLOADING_NOT_ALLOWED=2]="DOWNLOADING_NOT_ALLOWED"}(Ka||(Ka={})),function(e){e.download="download",e.clear="clear",e.notAllowed="notAllowed"}($a||($a={}));var Xa=n(8172);(0,n(4671).Z)(((e,t)=>({entities:{},connection:Va.ONLINE,permissions:Ka.DOWNLOADING_NOT_ALLOWED,setConnection:n=>{e((0,Xa.Uy)(t(),(e=>{e.connection=n})))},setPermissions:n=>{e((0,Xa.Uy)(t(),(e=>{e.permissions=n})))}})));const ja=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),za=/\p{White_Space}/u,qa=/\p{P}/u,Qa=/\p{sc=Han}/u;function Za(e){return null!==e&&za.test(e)}function er(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||Za(e))}function tr(e){return null!==e&&qa.test(e)}function nr(e){return null!==e&&Qa.test(e)}class ar{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new ar(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,a=t-e;return new ar(this.data,n,a)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function rr(e){let t;do{t=e.nextCodePoint()}while(null!==t&&Za(t)||tr(t));return t}function or(e,t){let n=rr(e),a=rr(t);if(null===a)return{offset:0,length:0};const r=e.offset+e.position-1;let o=e.offset+e.position;for(;;){if(null===n&&null===a)return{offset:r,length:o-r};if(null===a)return{offset:r,length:o-r};if(null===n)return null;if(0!==ja.compare(n,a))return null;o=e.offset+e.position,n=rr(e),a=rr(t)}}function ir(e,t){let n,a,r;do{a=e.position,n=e.nextCodePoint()}while(null!==n&&Za(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;a=e.position;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&a===r?null:e.slice(a,r)}do{if(r=e.position,t?.segmentCJKUnifieIdeographs&&nr(n))break;n=e.nextCodePoint()}while(null!==n&&!er(n));return null===n&&a===r?null:e.slice(a,r)}function sr(e){return ir(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function lr(e){return ir(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function dr(e,t){const n=[];for(let a=lr(e);null!==a;a=lr(e)){let r=or(a,t.slice());null===r?(r=or(e.slice(a.offset),t.slice()),null===r||n.push(r)):n.push(r)}return n}function cr(e,t){return e.offset===t.offset&&e.length===t.length}function pr(e,...t){const n=ar.from(e),a=[];for(let e=sr(n);null!==e;e=sr(n)){const n=[];for(let a=0;a<t.length;++a){const r=t[a],o=dr(ar.from(r),e);for(const e of o)n.push({text:r,range:e})}if(0===n.length)return null;a.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>cr(e.range,t.range)))===t)))}return a.length>0?a:null}const ur="SbHs3Uu1EU0cmvhxoTNE",gr="XagfkHHUPIC2O6Q_lfEw",mr=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==pr(e,t):"boolean"!=typeof e||e,hr=({filter:e,title:t})=>{const n=(0,s.useCallback)((({searchWords:[e],textToHighlight:t})=>e?(pr(e,t)||[]).map((e=>({start:e.range.offset,end:e.range.offset+e.range.length}))):[]),[]);return s.createElement(Rn.Dy,{as:"h2",variant:"cello",className:gr,semanticColor:"textBase"},"string"==typeof e&&e.length>0?s.createElement(wn(),{searchWords:[e],textToHighlight:t,findChunks:n,highlightClassName:ur}):t)},Er=({filter:e,title:t,children:n,rows:a})=>{const r=mr(e,t);if("ALLOW_NULL_ROWS"===a)return r?s.createElement(s.Fragment,null,s.createElement(hr,{filter:e,title:t}),n):null;const o=r?a:a.filter((e=>e&&mr(e?.props.filter,e?.props.title)));return o.length>0?s.createElement(s.Fragment,null,s.createElement(hr,{filter:e,title:t}),o,n):null};var _r=n(6501);const fr={horizontalPair:"QdHLUcR6fUG0NMpMpxbQ",ProxySettings:"PM2eBojuLDjs3wM2jY6x",fullWidth:"V0tNwwnJHzwFrLYFSVhn",proxyInput:"aQJknW_LvVUnrcdJNXVA",labelStretch:"iXaZ29sMMazjjRS1_MGy",restartAppButton:"yItjEPzHEmxYuEoTJJBl",title:"HkLDZG7BHRMlXcxLOlBd",ProxyFormGroup:"ZUltXmAUnMFuWM6kgOQo"},Sr=({id:e,type:t,placeHolder:n,inputRef:a,handleOnChange:r})=>s.createElement("input",{type:t||"text",id:e,"data-testid":e,className:fr.proxyInput,placeholder:n,ref:a,onChange:r}),br=({children:e,label:t})=>s.createElement(_r.cw,{label:t,className:fr.ProxyFormGroup},e),Tr=(e,t,n)=>{let a=`${e}:${t}`;switch(n){case ut:a+="@http";break;case gt:a+="@socks4";break;case mt:a+="@socks5"}return a},Ar=({addr:e,mode:t,pass:n,user:a,setValue:r,restartContainer:o,fullWidth:i,filter:l})=>{const d=(0,s.useRef)(null),c=(0,s.useRef)(null),p=(0,s.useRef)(null),u=(0,s.useRef)(null),[g,m]=(0,s.useState)(""),[h,E]=(0,s.useState)(""),[_,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];m(t),E(n),d.current&&(d.current.value=t),c.current&&(c.current.value=n)}),[e]),(0,s.useEffect)((()=>{u.current&&n&&(u.current.value=n.toString())}),[n]),(0,s.useEffect)((()=>{p.current&&a&&(p.current.value=a.toString())}),[a]);const S=(0,s.useCallback)((({target:e})=>{const n=Tr(e.value,h,t||0);m(e.value),r("network.proxy.addr",n),f(!0)}),[t,h,r]),b=(0,s.useCallback)((({target:e})=>{const n=Tr(g,e.value,t||0);E(e.value),r("network.proxy.addr",n),f(!0)}),[t,g,r]),T=(0,s.useCallback)((({target:e})=>{r("network.proxy.user",e.value),f(!0)}),[r]),A=(0,s.useCallback)((({target:e})=>{r("network.proxy.pass",e.value),f(!0)}),[r]),y=0!==t&&1!==t,D=t!==gt;return s.createElement(Er,{rows:"ALLOW_NULL_ROWS",filter:l,title:pt.get("desktop.settings.proxy.title")},s.createElement("div",{className:Gt()(fr.ProxySettings,i?fr.fullWidth:null)},s.createElement(br,{label:pt.get("desktop.settings.proxy.type")},s.createElement(Ln,{className:fr.secondColumn,id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);r("network.proxy.mode",t),f(!0)}},Et.map((({enumKey:e,enumValue:t})=>s.createElement("option",{key:e,value:t,"data-testid":e},ht[e]?ht[e].label():""))))),y?s.createElement(s.Fragment,null,s.createElement("div",{className:fr.horizontalPair},s.createElement(br,{label:pt.get("desktop.settings.proxy.host")},s.createElement(Sr,{id:"network.proxy.host",handleOnChange:S,placeHolder:pt.get("desktop.settings.proxy.host"),inputRef:d})),s.createElement(br,{label:pt.get("desktop.settings.proxy.port")},s.createElement(Sr,{id:"network.proxy.port",type:"number",handleOnChange:b,placeHolder:pt.get("desktop.settings.proxy.port"),inputRef:c}))),s.createElement("div",{className:D?fr.horizontalPair:void 0},s.createElement(br,{label:pt.get("desktop.settings.proxy.user")},s.createElement(Sr,{id:"network.proxy.user",handleOnChange:T,placeHolder:pt.get("desktop.settings.proxy.user"),inputRef:p})),D?s.createElement(br,{label:pt.get("desktop.settings.proxy.pass")},s.createElement(Sr,{id:"network.proxy.pass",handleOnChange:A,placeHolder:pt.get("desktop.settings.proxy.pass"),type:"password",inputRef:u})):null)):null,_&&s.createElement("div",null,s.createElement(On.P,{buttonSize:"sm",className:fr.restartAppButton,onClick:o},pt.get("settings.restartApp")))))},yr=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const Dr=(0,c.$j)((e=>({settings:{proxy:e.settings.proxy}})),(e=>({fetchProxySettings(){e(Ct.fetchProxySettings())},updateProxySettings(t){e(Ct.updateProxySettings(t))},restartClient(){e(Ct.restartClient())}})))((({settings:e={proxy:{mode:0,address:"",username:"",password:""}},fetchProxySettings:t=(()=>{}),updateProxySettings:n=(()=>{}),restartClient:a=(()=>{})})=>{(0,s.useEffect)((()=>{t()}),[t]);const r=(0,s.useCallback)(((t,a)=>{if(function(e){return!!yr.includes(e)}(t)){const r={...e.proxy};switch(t){case"network.proxy.mode":r.mode=a;break;case"network.proxy.addr":r.address=a;break;case"network.proxy.user":r.username=a;break;case"network.proxy.pass":r.password=a}n(r)}return Promise.resolve()}),[e,n]);return s.createElement("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings"},s.createElement("h1",{className:"HeroText",id:"settings-form-title"},pt.get("desktop.login.PreferencesLink")),s.createElement(Ar,{mode:e.proxy.mode,addr:e.proxy.address,user:e.proxy.username,pass:e.proxy.password,setValue:r,restartContainer:a,fullWidth:!0}))}));class Nr extends s.PureComponent{constructor(e){super(e),this.handleSettingsClick=this.goToSettingsPage.bind(this),this.handleBackToLoginClick=this.handleBackToLoginClick.bind(this)}handleSignupClick(){const{openSignupPage:e,onInteraction:t}=this.props,n=Lt();e(n),t("login/welcome","click","open-page-signup",null,n)}handleBackToLoginClick(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}goToSettingsPage(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}renderPreferencesLink(){return s.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings"},pt.get("desktop.login.PreferencesLink"))}renderBackToLoginLink(){return s.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login"},pt.get("desktop.login.Back"))}renderTryAgain(){return s.createElement(s.Fragment,null,s.createElement("span",null,pt.get("desktop-auth.login.not-seeing-browser"))," ",s.createElement("a",{href:"#",onClick:()=>this.props.tryAgainHandler()},pt.get("desktop-auth.login.try-again")))}renderSignupLink(){return s.createElement("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignupClick(),"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:pt.get("desktop.login.DontHaveAnAccountSignup")}})}renderRussiaLegalFormLink(){return s.createElement("div",null,s.createElement("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener"},"Форма для Ваших обращений"))}render(){const{mode:e,country:t}=this.props;return s.createElement("footer",{className:"Footer",role:"contentinfo"},"login"===e&&this.renderPreferencesLink(),"settings"===e&&this.renderBackToLoginLink(),"open-browser"===e&&this.renderTryAgain(),"welcome"===e&&this.renderSignupLink(),"RU"===t&&this.renderRussiaLegalFormLink())}}const Ir=(0,c.$j)((e=>({country:e.signup.restrictions?.country})),(e=>({tryAgainHandler:()=>{e(Ct.abortLoginWithAccounts()),e(Ct.enterWelcomeMode())},openLoginPage:()=>{e(Ct.enterLoginMode())},openSignupPage:t=>e(Ct.enterSignupMode(t)),openSettingsPage:()=>e(Ct.enterSettingsMode()),onInteraction:(t,n,a,r,o)=>e(Ct.interaction(t,n,a,r,o))})))(Nr);class Cr extends s.PureComponent{render(){return s.createElement("header",{className:"Header"},s.createElement("h1",{className:"glue-hidden-visually"},"Spotify"),s.createElement("img",{className:"Header__logo",src:"images/logo.svg",alt:""}))}}var kr=n(7723),Or=n(5989);class Pr extends s.Component{static defaultProps={throbberDelay:0,transitionLeaveTimeout:0};renderFakeWebPlayer(){return s.createElement("div",{className:"fakeWebPlayer"},s.createElement("aside",null),s.createElement("footer",null,s.createElement("div",{className:"fakeWebPlayer__footer-left"}),s.createElement("div",{className:"fakeWebPlayer__footer-center"}),s.createElement("div",{className:"fakeWebPlayer__footer-right"})),s.createElement("main",null,s.createElement("div",{className:"fakeWebPlayer__content"})))}render(){const{loading:e,mode:t,loggedIn:n,previousMode:a,throbberDelay:r,signupStep:o,previousSignupStep:i}=this.props;if(e||!t)return s.createElement(kt,{delay:r});if(n)return null;let l=a?`__${t} __${a}-to-${t}`:"";return"signup"===t&&Number.isInteger(i)&&(l+=` __signup_step_${i}_to_${o}`),s.createElement("main",{className:"App",key:"main1","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t},this.renderFakeWebPlayer(),s.createElement("div",{className:`App__content ${l}`},s.createElement(Or.Z,{mode:"in-out"},s.createElement(kr.Z,{timeout:{appear:0,enter:0,exit:650},key:l},s.createElement("div",{className:`App__modal ${l}`},s.createElement(Cr,null),"welcome"===t&&s.createElement(Ft,null),"signup"===t&&s.createElement(bn,{step:o}),"login"===t&&s.createElement(In,null),"open-browser"===t&&s.createElement(kn,null),"settings"===t&&s.createElement(Dr,null),s.createElement(Ir,{mode:t}))))))}}const Lr=(0,c.$j)((e=>({mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay})))(Pr);var vr=n(7779),wr=n(3894);const Rr=e=>t=>n=>{const a=t(n);switch(n.type){case Ct.START_APP:e.dispatch(Ct.fetchUTMParameters()),e.dispatch(Ct.getSignupRestrictions());!B.getItem("lastUsername")?e.dispatch(Ct.enterWelcomeMode()):e.dispatch(Ct.enterLoginMode());break;case Ct.LOGIN_FAIL:{const t=e.getState();if(n.loginType===Ct.LOGIN_TYPE_AUTOLOGIN){const n=t.app.mode;"welcome"===n?e.dispatch(Ct.enterWelcomeMode()):"login"===n?e.dispatch(Ct.enterLoginMode()):"signup"===n&&e.dispatch(Ct.enterSignupMode())}else{if("open-browser"===t.app.mode){const a=n.errorData;let r=Wt(a.errorCategory,a.errorCode,a.errorReference);"desktop_login_accounts"===a.errorCategory&&4===a.errorCode&&(r="signup"===t.experimentWebAuthReducer.operationUsed?pt.get("desktop-auth.login.signup-time-out"):pt.get("desktop-auth.login.login-time-out")),r?e.dispatch(Ct.enterWelcomeMode(r)):e.dispatch(Ct.enterWelcomeMode())}}break}case Ct.ENTER_SIGNUP_MODE:{const t=e.getState().signup.restrictions;t?!1===t.is_country_launched&&e.dispatch(Ct.countryNotLaunched()):e.dispatch(Ct.getSignupRestrictions());break}case Ct.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Ct.countryNotLaunched());break;case Ct.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Ct.enterSignupModeStep0());break;case Ct.COUNTRY_NOT_LAUNCHED:e.dispatch(Ct.openSignupPage(!0))}return a};var Fr=n(9798);const Mr=Pt().create().toString(),Ur="has-used-app",xr=!window.localStorage.getItem(Ur);xr&&window.localStorage.setItem(Ur,!0);const Br=()=>{const e=B.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Gr{constructor(e){this._eventSender=e}logPageView({page:e}){this.logAction({page:e,action_type:"pageview",action_intent:""})}logAction({page:e,action_type:t,action_intent:n,item_id:a,action_hash:r}){this._eventSender.send((0,Fr.e)({action_type:t,action_intent:n,action_page:e,action_item_id:a,action_hash:r,device_is_new_install:xr,device_locale:window.__spotify.locale,device_referrer:Br(),ab_flags:"",session_id:Mr}))}}const Wr=e=>{window.location.href=e},Vr=()=>e=>t=>{const n=e(t);if(!t.redirectTo)return n;let a;return"xpui"!==t.redirectTo||(a="spotify:app:xpui",t.redirectDelay?setTimeout((()=>{Wr(a)}),t.redirectDelay):Wr(a)),n},Hr={errorMessage:null};const Yr=function(e=Hr,t){switch(t.type){case Ct.ENTER_SIGNUP_MODE:return{...e,previousMode:e.mode,mode:"signup"};case Ct.ENTER_LOGIN_MODE:case Ct.COUNTRY_NOT_LAUNCHED:return{...e,previousMode:e.mode,mode:"login"};case Ct.ENTER_WELCOME_MODE:return{...e,previousMode:e.mode,mode:"welcome",errorMessage:t.errorMessage??null};case Ct.ENTER_SETTINGS_MODE:return{...e,previousMode:e.mode,mode:"settings"};default:return e}};const Jr={proxy:{mode:0,address:"",username:"",password:""}};const Kr=function(e=Jr,t){return function(e){return e.type===Ct.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}(t)?{...e,proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}:e},$r={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Xr=function(e=$r,t){switch(t.type){case Ct.ENTER_SIGNUP_MODE_STEP_0:return{...e,previousStep:e.step,step:0};case Ct.ENTER_SIGNUP_MODE_STEP_1:return{...e,previousStep:e.step,step:1};case Ct.SIGNUP_RESTRICTIONS_SUCCESS:return{...e,formData:{...e.formData,sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula},restrictions:t.restrictions};case Ct.SIGNUP_RESTRICTIONS_FAILURE:return{...e,errorData:t.error};case Ct.SIGNUP_ATTEMPT:return{...e,isAttempting:!0,errorData:null};case Ct.SIGNUP_SUCCESS:return{...e,isAttempting:!0,isSuccessful:!0,errorData:null};case Ct.SIGNUP_FAILURE:return{...e,isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null};case Ct.FACEBOOK_SIGNUP_ATTEMPT:return{...e,errorData:null,errors:{}};case Ct.FACEBOOK_SIGNUP_FAILURE:return{...e,errorData:t.errorData};case Ct.VALIDATE_FIELD_ATTEMPT:return{...e,errors:{...e.errors,[t.field]:void 0}};case Ct.VALIDATE_FIELD_FAILURE:return{...e,errors:{...e.errors,[t.field]:t.error},validated:{...e.validated,[t.field]:!1}};case Ct.VALIDATE_FIELD_SUCCESS:return{...e,errors:{...e.errors,[t.field]:void 0},validated:{...e.validated,[t.field]:!0}};case Ct.UPDATE_SIGNUP_DATA:{const n={};for(const e of Object.keys(t.data))n[e]=void 0;return{...e,errors:{...e.errors,...n},formData:{...e.formData,...t.data}}}case Ct.CLEAR_ALL_ERRORS:return{...e,errors:{}};default:return e}};function jr(e){const t=(0,vr.MT)((0,vr.UY)({app:Yr,login:K,settings:Kr,signup:Xr}),void 0,(0,vr.md)(wr.Z,Rr,(e=>{const t=new Gr(e);return()=>e=>n=>{const a=e(n);switch(n.type){case Ct.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case Ct.LOGIN_SUCCESS:n.loginType===Ct.LOGIN_TYPE_EMAIL?t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"}):n.loginType===Ct.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case Ct.LOGIN_FAIL:n.loginType===Ct.LOGIN_TYPE_EMAIL?n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):n.loginType===Ct.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case Ct.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case Ct.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Ct.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Ct.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Ct.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Ct.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Ct.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&`${n.errorData.errorCode} - ${n.errorData.errorDescription}`});break;case Ct.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case Ct.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case Ct.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Ct.VALIDATE_FIELD_FAILURE:if(n.error){const e=n.field,a=n.error.code;let r=null,o=null;"valueMissing"===a?r=`show-error-empty-${e}`:["incomplete","invalid","typeMismatch","tooShort"].includes(a)?r=`show-error-format-${e}`:(r=`show-error-${e}`,o=n.error.message||""),null!==r&&t.logAction({page:"signup",action_type:"view",action_intent:r,...o?{item_id:o}:{}})}}return a}})(e),Vr));return t.subscribe((()=>{const e=t.getState();e.login.username&&localStorage.setItem(G,e.login.username),e.login.utmParameters&&localStorage.setItem(V,JSON.stringify(e.login.utmParameters))})),t}var zr=n(2585),qr=n(9466);let Qr=null;var Zr=n(1076),eo=n(6471);(async function(){for(const e of[window.__spotify.locale,ot.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return pt.setLocale(e),void pt.setDictionary(t)}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")})().then((async function(){const e=function(){const e=(0,qr.createBaseTransport)({providers:{endpoints:(0,qr.createXResolveProvider)(),token:()=>null}});return e.connect(),e}();Qr=e;const t=((e,t,n)=>{const a=e.event_sender_context_information,r=[(0,eo.UR)({version:a.client_version_string}),(0,eo.jx)(n),(0,eo.IE)(a.installation_id),(0,eo.Hv)({name:a.platform_type,version:a.os_version}),(0,eo.yD)({manufacturer:a.device_manufacturer||"",model:a.device_model||""})];return(0,Zr.mi)({transport:t,suppressPersist:!1,context:r})})(window.__spotify,e,"65b708073fc0480ea92a077233ca87bd"),n=jr(t);u.attach(),u.update(),p.attach();const a=document.location.search,r=new RegExp(`\\?param=error-code\\${encodeURIComponent("=")}([0-9]+)`,"i");window.addEventListener("message",(e=>{"critical-update-error"===e.data&&n.dispatch(Ct.loginFailed({errorCode:e.data}))}));const o=a.match(r);if(a&&o){const e=+o[1];n.dispatch(Ct.loginFailed({errorCode:e}))}let i="linux";window.navigator.platform.startsWith("Mac")&&(i="mac"),window.navigator.platform.startsWith("Win")&&(i="windows"),document.body.classList.add(`body-container--${i}`),l.render(s.createElement(d.zj,null,s.createElement(c.zt,{store:n},s.createElement(Lr,null))),document.getElementById("main")),n.dispatch(Ct.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr");const g={[zr.PLATFORM_UNKNOWN]:"body-container--unknown-os",[zr.PLATFORM_MAC]:"body-container--mac",[zr.PLATFORM_WINDOWS]:"body-container--windows"},m=(0,zr.getPlatform)();document.body.classList.add(g[m])}))},2585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>r,PLATFORM_UNKNOWN:()=>a,PLATFORM_WINDOWS:()=>o,getPlatform:()=>l,isMac:()=>i,isWindows:()=>s});const a=Symbol("PLATFORM_UNKNOWN"),r=Symbol("PLATFORM_MAC"),o=Symbol("PLATFORM_WINDOWS");function i(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function l(){return i()?r:s()?o:a}},2976:(e,t)=>{let n=!1;t.update=()=>{},t.attach=()=>{if(n)return;n=!0;const e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)},t.detach=()=>{n&&(n=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,n)=>{const{getPlatform:a,PLATFORM_UNKNOWN:r,PLATFORM_MAC:o,PLATFORM_WINDOWS:i}=n(2585);let s=!1,l="always-visible",d=0;const c={[r]:"linux",[o]:"mac",[i]:"windows"};let p=c[r];function u(){const e=[...document.querySelectorAll("*")],t=[],n=["scroll","auto","overlay"];e.forEach((e=>{const a=window.getComputedStyle(e),r=a.overflowX,o=a.overflowY;n.includes(r)&&t.push({node:e,property:"overflow-x"}),n.includes(o)&&t.push({node:e,property:"overflow-y"})}));const a=document.createElement("style");a.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();const r=`data-scrollbar-fix-${++d}-id`;let o=0;t.forEach((({node:e,property:t})=>{if(e!==document.body){const n=++o;e.setAttribute(r,n),a.innerHTML+=`\n    [${r}="${n}"] { ${t}: hidden !important; }`}})),document.head.appendChild(a),setTimeout((()=>{document.head.removeChild(a),t.forEach((({node:e})=>{e.removeAttribute(r)}))}),0)}t.performScrollBarFix=u,t.update=function(){},t.attach=function(){if(s)return;s=!0;const e=window.__spotify&&window.__spotify.scroller_style;l="overlay"===e?"overlay":"always-visible";const t=a();p=c[t],"always-visible"===l||"mac"!==p?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add(`scrollbar-style-visible-${p}`)):(document.body.classList.remove(`scrollbar-style-visible-${p}`),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(e=>{"set_active"===e.data.name&&e.data.active&&u()}))},t.detach=function(){s&&(s=!1,d=0)}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,a.amdO={},e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,r,o]=e[c],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,l]=n,d=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var c=l(a)}for(t&&t(n);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[569],(()=>a(9358)));r=a.O(r)})();
//# sourceMappingURL=login.js.map