"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{95289:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(67294),r=a(94184),l=a.n(r),i=a(28760),o=a(62312),s=a(41374),c=a(20246),m=a(58238),u=a(91883),d=a(30005),g=a(36652),E=a(21691),p=a(28248);const y=({heading:e,selected:t,onSelect:a,options:r,sortOrder:l})=>{let o;return l&&(l===p.kn.ASC||l===p.kn.SECONDARY_ASC?o=n.createElement(m.C,{iconSize:16}):l!==p.kn.DESC&&l!==p.kn.SECONDARY_DESC||(o=n.createElement(u.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(E.s,{role:"menuitemradio","aria-checked":e===t.key&&!o,key:e,onClick:()=>a(e),icon:e===t.key&&o},n.createElement(i.Dy,{variant:"mesto"},r)))))},k="w6j_vX6SF5IxSXrrkYw5",h="CbHJjxYxldG7uUPMYMaP";const f=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:m,sortOrder:u,variant:d="mesto",semanticColor:g,disabled:E,onClick:p})=>{const[f]=t;a||(a=f);const b=m?m(a):a!==f;return n.createElement(c.y,{menu:n.createElement(y,{selected:a,options:t,onSelect:r,sortOrder:u,heading:e})},((e,t,r)=>n.createElement("button",{className:l()(k,{[h]:b}),onClick:e=>{E||(p?.(e),t(e))},ref:r,type:"button"},n.createElement(i.Dy,{semanticColor:g,variant:d},a.value),e?n.createElement(o.U,{iconSize:16}):n.createElement(s.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>R,e:()=>A});var n=a(67294),r=a(28216),l=a(69518),i=a.n(l),o=a(33702),s=a(84629),c=a(43914),m=a(25988),u=a(68556),d=a(95806),g=a(99191),E=a(56802),p=a(38894),y=a(80219),k=a(18261),h=a(62975),f=a(87257),b=a(57978),v=a(75016),C=a(42922),S=a(18864),P=a(52759),w=a(54444),N=a(7073),x=a(84788);function A(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const I=e=>`activation-trigger-mme-${e}`,R=n.memo((function({index:e,showMetadata:t,episode:a,usePlayContextItem:l}){const R=(0,r.oR)().getState().platform?.isBrowser,U=a.playedState.playPositionMilliseconds,D=a.uri,F=(0,n.useRef)(null),[M,z]=(0,n.useState)(a.playedState.state===N.sY.Completed),B=(0,g.O1)(),L=(0,p.g)(),O=(0,S.jh)(),T=(0,E.o)(),_=(0,r.I0)(),{UBIFragment:G,spec:X,logger:j}=(0,w.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:D,reason:a.requestId||"",position:e}}),H=(0,w.Wi)(X),{isActive:W,isPlaying:Y,togglePlay:q}=l({uri:D}),[Z]=(0,P.z)(1e4,(e=>e?.item?.uri===D));(0,n.useEffect)((()=>{Y&&(F.current=Z)}),[Y,Z]),(0,n.useEffect)((()=>{!Y&&F.current&&a.duration.milliseconds<=F.current&&z(!0)}),[Y,a.duration.milliseconds]);const V=(0,n.useCallback)((e=>{e||(F.current=0),z(e)}),[]),K=A(t),$=(0,y.s)({...a,coverArt:{sources:a.coverArt}},K),J=(0,n.useCallback)((()=>{if(a.episodeType===N.Wf.Episode&&R)h.y.set((()=>({triggerId:I(a.uri),triggerAction:null})));else if(L)$();else{let e;e=Y?X.playButtonFactory().hitPause({itemToBePaused:D}):W?X.playButtonFactory().hitResume({itemToBeResumed:D}):X.playButtonFactory().hitPlay({itemToBePlayed:D});const t=j.logInteraction(e);T({targetUri:D,intent:Y?"pause":"play",type:"click"}),q({loggingParams:t})}}),[W,$,T,q,D,Y,L,a,R,j,X]),Q=(0,n.useCallback)((()=>{j.logInteraction(X.hitUiNavigate({destination:D})),T({type:"click",targetUri:D,intent:"navigate"})}),[D,T,j,X]),ee=a.podcastSubscription?.isPaywalled??!1,te=a.podcastSubscription?.isUserSubscribed??!1,ae=ee&&!te,ne=ee&&L,{badges:re}=(0,x.r)({contentRating:a.contentRating?.label,isPaywalled:ee}),le=(0,n.useCallback)((()=>_((0,s.RM)(t.uri))),[t.uri,_]),ie=(0,n.useCallback)((e=>{let r=e;return(ae||ne)&&(r=n.createElement(d.l,{enabled:!0,showUri:t.uri},r)),!a.playability.playable&&re.nineteen&&(r=n.createElement("div",{onClick:e=>{e.stopPropagation(),le()}},e)),r=n.createElement(c.D,{id:I(D),targetURI:i().from(D)},r),r}),[D,ae,ne,t.uri,re.nineteen,a.playability.playable,le]);return n.createElement(G,{spec:X},n.createElement(C.ZP,{value:"row",index:e},n.createElement(k._,{onShow:()=>{j.logInteraction(X.secondaryHitUiReveal())},menu:n.createElement(m.k,{uri:D,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:M,onMarkAsPlayed:V})},n.createElement(u.X,{ref:H,requestId:a.requestId,index:e,uri:D,size:O,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||ae,fullyPlayed:M,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:F.current??U,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} • ${t.name}`;B(e,[D],n,t.uri)},handlePlaybackClick:J,handleClick:Q,isCurrentlyPlaying:W,isPaywalled:ee,isUserSubscribed:te,isPlaying:Y,position:Y?Z:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:V,contentInformation:a.contentInformation,badges:n.createElement(n.Fragment,null,re.explicit&&n.createElement(f.N,null),re.paid&&n.createElement(v.g,null),re.nineteen&&n.createElement(b.X,{size:16})),playButtonWrapper:ie,onMoreButtonClick:()=>{j.logInteraction(X.moreButtonFactory().hitUiReveal())}}))))}))},4754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ia});var n=a(67294),r=a(51615),l=a(87577),i=a(14556),o=a(96206),s=a(70369),c=a(1663),m=a(28760),u=a(728),d=a(56802),g=a(25678),E=a(49961),p=a(85105);const y="GPPWAsVio35hH080drEK",k="f8FyVnjsXfG9VtTzk9Df",h="tpOdce3HYBF6ASz4MXdr",f="p9AillvR7MCZkOrv3U3h",b="zMqHdOQtjEEbcMV7YHe9",v="zPJ5qeQhpgUvKpAAlNpA",C="n3G4Y43jgF6wXOuj0X44",S=n.memo((function({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:l,backgroundColor:i}){const o=(0,r.k6)(),s=(0,d.o)();if((0,n.useEffect)((()=>{s({type:"view",intent:"audiobook-gated-entry-point"})}),[s]),!t||!t.partnerLink)return null;const{partnerLink:{title:c,body:S,soaPartners:P}}=t,w=(0,E.X)(e,{desiredSize:640}),N={"--bg-color":i};return n.createElement(p.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:l},n.createElement("div",{className:y,style:{...N}},n.createElement(g.Ee,{loading:"lazy",src:w?.url,className:k}),n.createElement("div",{className:h},n.createElement(m.Dy,{as:"p",variant:"canon",className:f},c),n.createElement(m.Dy,{as:"p",className:b},S),P&&P?.map((e=>n.createElement("a",{href:e.linkUrl,className:v,key:e.linkUrl,onClick:()=>{s({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),l(),o.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:C},n.createElement(m.Dy,{variant:"ballad"},e.displayName," ")),n.createElement(u.V,{iconSize:16})))))))}));var P=a(95661),w=a(22345),N=a(20246),x=a(94233),A=a(44887),I=a(7469),R=a(42781);const U={container:"SpVoh9vvBN0kIwzfCiBh",isActive:"nsGHaEmn310z9W4RMbb8",title:"PfYVlZzroXSurDmS_kxY",main:"kCT99_BcJQtW47mEfVF6",titleContainer:"gmDgEbPyRXNixmjYAT9f",duration:"itbbweiDUhLIrwEjSRWv",trailerContainer:"XlZGcb86bItwlMPQ2jOf",image:"VGTtqfOlX2jIbpff6mPP",imageContainer:"aexqooSgfdW95poEaxjH",playButton:"Fui2wGupk4F1Khigbrhj",entityImageLarge:"jWcvSz47NFpbLjnkFT1O",entityImageSmall:"Oo6MP8F01W5uGlnw8dag"};var D=a(55911),F=a(94184),M=a.n(F),z=a(33985),B=a(87257),L=a(57978),O=a(95775),T=a(84788),_=a(85592);let G;!function(e){e.SMALL="small",e.LARGE="large"}(G||(G={}));const X=({images:e,title:t,contentRating:a,duration:r,moreButton:l,onClick:i,onContextMenu:o,onTouchStart:s,onTouchEnd:c,isPlaying:u,isActive:d,size:g,className:E,label:p})=>{const y=g===G.LARGE?"md":"sm",{badges:k}=(0,T.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:M()(U.container,E,{[U.isActive]:d}),onContextMenu:o,onTouchStart:s,onTouchEnd:c},n.createElement("div",{className:U.main},n.createElement("div",{className:U.imageContainer},n.createElement(A.O,{type:R.p.EPISODE,title:t,className:M()(U.image,{[U.entityImageSmall]:g===G.SMALL,[U.entityImageLarge]:g===G.LARGE}),size:I.m$.SIZE_56,images:e,shape:A.K.ROUNDED_CORNERS}),n.createElement("div",{className:U.playButton},n.createElement(_.fh,{"data-testid":"trailer-play-button",version:D.ul.transparent,size:y,isPlaying:u,onClick:i}))),n.createElement("div",{className:U.metadata},n.createElement("div",{className:U.titleContainer},n.createElement(m.Dy,{dir:"auto",className:U.title,variant:"balladBold"},t)),n.createElement("div",{className:U.trailerContainer},n.createElement(O.V,{text:p}),k.explicit&&n.createElement(B.N,null),k.nineteen&&n.createElement(L.X,null),n.createElement(m.Dy,{dir:"auto",variant:"mesto"},n.createElement(z.nL,{durationMs:r}))))),l)};var j=a(40080),H=a(43620),W=a(84242),Y=a(9983),q=a(27999),Z=a(67892);const V="nLNTsyonBwoRIzAv1AME",K="E4I5I7G2CfW32hLWZaqE",$=({title:e,uri:t,className:a,onClick:r,position:l})=>{const i=(0,n.useCallback)((e=>{r?.(e,{uri:t,position:l})}),[r,l,t]);return n.createElement(Z.r,{"aria-label":e,className:M()(K,a),to:t,onClick:i},n.createElement(m.Dy,{dir:"auto",variant:"mestoBold"},e))};function J(e){return!!e.uri&&!!e.title}const Q=({topics:e,className:t,onClick:a})=>n.createElement("div",{className:M()(V,t)},e.filter(J).map(((e,t)=>n.createElement($,{key:e.uri,title:e.title,uri:e.uri,position:t,onClick:a}))));var ee=a(20238);const te={sectionTitle:"igKG5CnS4gyhXQWp5GVu",author:"E8g_EyijtSREXL0vMFbL",narrator:"Pc8AKn4KmzHwEw8lPiSb",topics:"yE1clVJOE3LrEuOvUxxq"},ae=({htmlDescription:e,narrators:t})=>{const a=(0,d.o)(),r=(0,n.useCallback)((()=>{a({intent:"expand-description",type:"click"})}),[a]);return n.createElement(n.Fragment,null,t.length?n.createElement(m.Dy,{as:"p",variant:"ballad",className:te.narrator},o.ag.get("web-player.audiobooks.narratedByX",t.join(o.ag.getSeparator()))):null,e&&n.createElement(ee.o,{maxLines:4,content:e,htmlContent:e,LinkComponent:Z.Z,onExpanded:r,className:te.description}))};var ne=a(4383),re=a(90110);const le=n.memo((function({uri:e,size:t=re.q.md,className:a,onClick:r}){const[l,i]=(0,ne.Z)(e),o=(0,d.o)(),s=(0,n.useCallback)((()=>{o({targetUri:e,intent:l?"unsave":"save",type:"click"}),i(!l)}),[o,e,l,i]);return n.createElement(re.o,{className:a,isFollowing:l,onFollow:s,onClick:r,uri:e,size:t})}));var ie=a(28137);const oe="fh0UJnx_1gVzGAmFaePG";var se=a(30947),ce=a(11414),me=a(32626),ue=a(98778),de=a(55120),ge=a(4236);const Ee=n.memo((({children:e})=>n.createElement("div",{className:oe},e))),pe=n.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:r,isExplicit:l,togglePlay:i,isLocked:s,duration:c}){const[m,u]=(0,ne.Z)(t),g=!(0,ge.k)(),E=(0,d.o)(),p=(0,n.useCallback)((()=>{E({targetUri:t,intent:m?"unsave":"save",type:"click"}),u(!m)}),[E,t,m,u]);return n.createElement(se.o,{backgroundColor:e},n.createElement(Ee,null,l&&n.createElement(B.N,null),n.createElement(z.nL,{durationMs:c})),n.createElement(se.F,null,n.createElement(de.$,{onClick:()=>i(),isPlaying:r,size:D.qE.lg,uri:t,locked:s}),n.createElement(ue.r,{key:"follow-button"},n.createElement(ce.H,{isAdded:m,onClick:p,disabled:g,size:ce.q.md,isAudiobook:!0})),s&&n.createElement(le,{uri:t}),n.createElement(me.yj,{menu:n.createElement(ie.X,{uri:t})},n.createElement(P.z,{label:o.ag.get("more.label.context",a)}))))}));var ye=a(42273),ke=a(59482),he=a(72907);const fe=n.memo((function({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:l,isPlaying:i,togglePlay:s,isLocked:c}){return n.createElement(ye.gF,{backgroundColor:l},n.createElement(ke.W,null,n.createElement(de.$,{size:D.qE.sm,onClick:()=>s(),isPlaying:i,uri:r,locked:c}),n.createElement(he.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(me._P,{menu:n.createElement(ie.X,{uri:r})},n.createElement(ye.Oz,{images:e,name:t,shape:A.K.ROUNDED_CORNERS})),n.createElement(ye.sP,null,n.createElement(ye.dy,{small:!0,uppercase:!0},o.ag.get("web-player.audiobooks.audiobook")),n.createElement(ye.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(ye.QS,{author:a})))}));var be=a(42745),ve=a(73305),Ce=a(77868),Se=a(89116);const Pe="_yl4tOZxcpoUt28k6B8I",we="lcJflizNrSwDM9yPNk6h",Ne="ret7iHkCxcJvsZU14oPY",xe=({rating:e,className:t,onClick:a})=>{const r=e?.rating?.rating?Ce.u:Se.G;if(!e)return null;const l=e.averageRating?.showAverage?n.createElement(m.Dy,{variant:"mesto",className:M()(Ne)},"(",o.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("button",{className:M()(Pe,t),onClick:a},n.createElement(m.Dy,{dir:"auto",variant:"mestoBold"},e?.averageRating?.showAverage&&e.averageRating?.average?e.averageRating?.average:e?.rating?.rating?e.rating.rating:o.ag.get("web-player.audiobooks.noRating")),n.createElement(r,{iconSize:16,className:M()(we)}),l)};var Ae=a(54444);const Ie=({rating:e,uri:t})=>{const{spec:a,logger:r}=(0,Ae.fU)(be.createMobilePodcastRatingEventFactory,{data:{identifier:ve.W.PODCAST_SHOW_AUDIOBOOK,uri:t}});return n.createElement(xe,{rating:e,onClick:()=>{const e=a.ratingChipButtonFactory({identifier:t}).hitUiNavigate({destination:`spotify:show:${t}:ratings`});r.logInteraction(e)}})};var Re=a(33241),Ue=a(192);var De=a(86649),Fe=a(60410),Me=a(69518),ze=a.n(Me),Be=a(75016),Le=a(26010),Oe=a(69010),Te=a(8341),_e=a(5944),Ge=a(92408),Xe=a(31610);const je="BO8KtKFwgSHtMt6PAmuv",He="b0Vng72SrQiFroJKXfk2",We="eWxDd0LanTnTlSl8SOHX",Ye="eAOkseqV13_CAmzuDJpa",qe="fovofKIYdEIURgIYoKm2",Ze="we_1b4qCQBaFPT12eUXp",Ve="NXXFrQO7npgPCRuSKaAA",Ke="ekkhhuxKVGAzkEmuh9kE",$e="zd6xqobF255bxHFtCmXy",Je=n.memo((function({name:e,duration:t,uri:a,bookUri:l,bookName:i,usePlayContextItem:s,isLocked:c,isPlayable:u,resumePositionMs:g,isFullyPlayed:E,releaseDate:p,toggleActivationModal:y}){const k=(0,r.k6)(),h=ze().from(a).toURLPath(!0),[f,b]=(0,n.useState)(E),v=(0,n.useRef)(g),{isPlaying:C,togglePlay:S}=s({uri:a}),N=(0,Te.Y)((e=>{if(e?.item?.uri===a){const t=(0,_e.k)(e)??0;return v.current=t,t}return 0})),{useDownloading:x}=(0,n.useContext)(Le.I),{currentAvailability:A}=x(a),I=[Oe.V8.YES,Oe.V8.DOWNLOADING,Oe.V8.WAITING].includes(A),R=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),U=(0,n.useCallback)((e=>{R(e),h&&k.push(h)}),[R,h,k]),D=(0,d.o)(),F=(0,n.useCallback)((e=>{R(e),c?(D({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),y()):S()}),[c,D,R,y,S]),z=(0,n.useCallback)((e=>{e||(v.current=0),b(e)}),[]);return n.createElement(me._P,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:f,onMarkAsPlayed:z})},n.createElement("div",{className:Ye},n.createElement(Z.r,{to:a,onClick:U,className:je,tabIndex:-1},n.createElement("hr",{className:We,"aria-hidden":!0}),n.createElement("div",{className:He},n.createElement(m.Dy,{as:"h2",variant:"balladBold",className:Ve,semanticColor:"textBase"},e),n.createElement("div",{className:Ke},n.createElement(_.fh,{size:"sm",version:_.ul.secondary,onClick:F,isPlaying:C,ariaPlayLabel:o.ag.get("tracklist.a11y.play",e,i),ariaPauseLabel:o.ag.get("tracklist.a11y.pause",e,i),locked:c,disabled:!u&&!c}),c?n.createElement(Be.g,null):null,n.createElement("div",{className:$e},n.createElement(Ge.E,{isPlaying:C,fullyPlayed:f,durationMs:t.milliseconds,releaseDate:p,resumePositionMs:v.current,position:C?N:void 0}))),n.createElement(me.yj,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:f,onMarkAsPlayed:z})},n.createElement(P.z,{className:qe,size:Xe.q.sm,label:o.ag.get("more.label.context",e),onClick:R})),n.createElement(Xe.o,{uri:a,bookUri:l,className:M()({[Ze]:!I}),onClick:R,size:Xe.q.sm})))))})),Qe=({bookUri:e,bookName:t,isFinishedUnlockingJourney:a,usePlayContextItem:r,toggleModal:l,setIsLocked:i})=>{const o=function(e,t){const a=(0,Ue.z)();return(0,n.useCallback)((async(n,r)=>a.getBookContents(e,{offset:n,limit:r,doRefreshSubscription:t})),[t,a,e])}(e,a),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),[m,u]=(0,n.useState)([]),d=(0,n.useCallback)((()=>{o&&(s.current||null===c.current||(s.current=!0,o(c.current,50).then((e=>{s.current=!1,c.current=e.nextOffset,e.items.length>0&&u((t=>t.concat(e.items)))}))))}),[o]);return(0,n.useEffect)((()=>{i((0,Fe.g)(m))}),[m,i]),n.createElement("ul",null,n.createElement(Re.C,{onReachBottom:d,triggerOnInitialLoad:!0},m.map((a=>{const{name:i,duration:o,uri:s,playability:{playable:c},playedState:{playPositionMilliseconds:m,state:u},releaseDate:d}=a;return n.createElement(Je,{name:i,duration:o,uri:s,bookUri:e,bookName:t,key:s,usePlayContextItem:r,isLocked:(0,Fe.S)(a),isPlayable:c,resumePositionMs:m,isFullyPlayed:u===De.sY.Completed,releaseDate:d?.isoString||"",toggleActivationModal:l})}))))},et={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",BookPage:"mmCZ5VczybT9VqKB5wFU",bookContent:"At_ihDspJfh1yw3Cn2cq",metadataLeft:"Yqz1Nv6wj1n3HmXL_qji",metadataRight:"qRqn3JrWLPbGW9k2a63n",ratingAndTopics:"HAah1_lK_dHgyyE71I8Z",chapters:"eiC4nh70nb5UHZBYMgNA"},tt=n.memo((function({metadata:e}){const{uri:t,coverArt:a,name:l,htmlDescription:i,authorName:s,sample:c,narrators:m,rating:u,isExplicit:g,duration:E,copyrights:p}=e,{search:y}=(0,r.TH)(),k=!!new URLSearchParams(y).get("isUnlockingAudiobook"),h=!(!(0,j.D)(k)||k),f=(0,H.Z)(a[0]?.url),[b,v]=(0,n.useState)(!1),C=(0,d.o)(),[A,I]=(0,n.useState)(!1);(0,n.useEffect)((()=>{C({type:"view",intent:"audiobook"})}),[C]);const R=(0,n.useCallback)((()=>{b||C({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),v(!b)}),[C,b]),U=(0,n.useCallback)((()=>(0,Y.Q)({show_uri:t,currency:"USD",price:10})),[t]),D=(0,q.ye)(t),{togglePlay:F,isPlaying:M,usePlayContextItem:z}=(0,W.n)({uri:t},{featureIdentifier:"audiobook"}),{isActive:B,isPlaying:L,togglePlay:O}=z({uri:c?.uri||""}),T=(0,n.useCallback)((()=>{c?.uri&&(C({targetUri:c.uri,intent:L?"play":"pause",type:"click"}),O())}),[L,C,O,c?.uri]),_=[{title:"Education",uri:"spotify:genre:educational_podcasts"}],Z=_.length>0;return n.createElement("section",{className:et.BookPage},n.createElement(fe,{name:l,authorName:s,uri:t,coverArt:a,backgroundColor:f,togglePlay:A?U:F,isPlaying:M,isLocked:A}),n.createElement(pe,{name:l,backgroundColor:f,uri:t,togglePlay:A?U:F,isPlaying:M,isLocked:A,isExplicit:g,duration:E}),n.createElement("div",{className:et.bookContent},n.createElement("div",{className:et.metadataLeft},n.createElement(ae,{htmlDescription:i,narrators:m})),n.createElement("div",{className:et.metadataRight},c&&n.createElement(X,{label:o.ag.get("sample"),className:et.sample,images:c.coverArt||[],title:c.name,duration:c.duration.milliseconds,moreButton:n.createElement(N.y,{menu:n.createElement(w.r,{uri:c.uri,showUri:t})},n.createElement(P.z,null)),onClick:T,isPlaying:L,isActive:B,size:G.LARGE,contentRating:c.contentRating?.label}),n.createElement("div",{className:et.ratingAndTopics},n.createElement(Ie,{uri:t,rating:u}),Z&&n.createElement(Q,{topics:_,className:et.topics}))),n.createElement("div",{className:et.chapters},n.createElement(Qe,{bookUri:t,bookName:l,isFinishedUnlockingJourney:h,usePlayContextItem:z,toggleModal:R,setIsLocked:I}),n.createElement(x.k,{copyrights:p}))),b&&D&&n.createElement(S,{backgroundColor:f,isOpen:b,toggleModal:R,coverArt:a,showAccessInfo:D}))}));var at=a(49207),nt=a(49125),rt=a(26382);const lt={field:rt.ay.PUBLISH_DATE,order:rt.i5.DESC},it={field:rt.ay.PUBLISH_DATE,order:rt.i5.ASC},ot={episodic:lt,sequential:it,recent:lt};function st(){return new Map([[lt,{key:"newest-to-oldest",value:o.ag.get("shows.sort.newest-to-oldest")}],[it,{key:"oldest-to-newest",value:o.ag.get("shows.sort.oldest-to-newest")}]])}function ct(e){return ot[e]}var mt=a(86514),ut=a(14535);const dt=({uri:e,name:t,backgroundColor:a,spec:r})=>{const l=(0,Ae.$P)(),i=(0,d.o)(),s=!(0,ge.k)(),[c,m]=(0,ne.Z)(e),u=(0,n.useCallback)((()=>{i({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=r.followButtonFactory();l.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),m(!c)}),[i,e,c,r,l,m]),g=(0,n.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]);return n.createElement(se.o,{backgroundColor:a},n.createElement(se.F,null,n.createElement(ue.r,{key:"follow-button"},n.createElement(ut.e,{isFollowing:c,onClick:u,disabled:s})),n.createElement(N.y,{menu:n.createElement(mt.M,{uri:e}),onShow:g},n.createElement(P.z,{label:o.ag.get("more.label.context",t)}))))},gt=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function Et(e){return(0,l.W6)(at.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(gt,e)):null}var pt=a(25988),yt=a(38894),kt=a(80219),ht=a(18261),ft=a(89952),bt=a(47917),vt=a(42922),Ct=a(18864),St=a(22583);const Pt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),wt=n.memo((function({uri:e,children:t}){return n.createElement(St.r,{uri:e,defaultState:[],sortContext:Pt,localStorageKey:"showFilterParams-v2"},t)})),Nt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:ct("recent")}),xt=e=>{const t=st();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},At=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(St.r,{uri:e,defaultState:a,sortContext:Nt,localStorageKey:"showSortParam",validator:xt},t)})),It="cJJXVm4gQW6AdfCQRhpX",Rt="hTRqaN61SDG95erQGMmx",Ut={totalCount:0,nextOffset:0,items:[]},Dt=n.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,n.useContext)(Nt),{sortState:r}=(0,n.useContext)(Pt),l=(0,q.ZM)(e.uri,a,r),[i,o]=(0,n.useState)(Ut),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),{ref:m,breakpoint:u}=(0,Ct.Db)({[Ct.Uo.MEDIUM]:0,[Ct.Uo.LARGE]:600}),d=(0,n.useCallback)(((e=!1)=>{if(!l)return;const t=c.current;null!==t&&(s.current||(s.current=!0,l(t,50).then((a=>{o((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:r}})),s.current=!1}))))}),[l]);return(0,n.useEffect)((()=>{o(Ut)}),[e.uri]),(0,n.useEffect)((()=>{c.current=0,d(!0)}),[d]),n.createElement(Ct.ZU.Provider,{value:u},n.createElement(vt.ZP,{value:"track-list"},n.createElement("div",{ref:m},n.createElement(Re.C,{onReachBottom:d,triggerOnInitialLoad:!0},i.items.map(((a,r)=>n.createElement("div",{className:Rt,key:`${r}${a.uri}`},n.createElement("hr",{className:It,"aria-hidden":!0}),n.createElement(bt.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))))}));var Ft=a(95289);const Mt={field:rt.YG.ISPLAYED,operator:rt.NK.EQUALS,value:!1},zt={field:rt.YG.STARTEDPLAYING,operator:rt.NK.GREATER_THAN,value:0};const Bt="all-episodes",Lt=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(Pt),r=new Map([[Mt,{key:"is-played",value:o.ag.get("shows.filter.unplayed")}],[zt,{key:"started-playing",value:o.ag.get("shows.filter.in-progress")}]]),l=Array.from(r.values());l.unshift({key:Bt,value:o.ag.get("mwp.podcast.all.episodes")});const i=Array.from(r.keys()),s=(0,n.useCallback)((t=>{if(t===Bt)a([]);else{const e=i.find((e=>r.get(e)?.key===t));e&&a([e])}e()}),[e,a,i,r]);if(!r.size||!i)return null;let c=l[0];const m=Array.from(r.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return m.length>0&&(c=m[0][1]),n.createElement(Ft.A,{options:l,onSelect:e=>s(e),selected:c,variant:"balladBold",semanticColor:"textBase",heading:o.ag.get("drop_down.filter_by")})},Ot=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(Nt),r=st(),l=Array.from(r.values()),i=Array.from(r.keys()),s=(0,n.useCallback)((t=>{const n=i.find((e=>r.get(e)?.key===t));n&&a(n),e()}),[i,e,r,a]);if(!r.size||!t)return null;const c=Array.from(r.keys()).find((e=>e.field===t.field&&e.order===t.order)),m=r.get(c);return n.createElement(Ft.A,{options:l,onSelect:e=>s(e),selected:m,heading:o.ag.get("drop_down.sort_by")})},Tt="aQMtxnKeiJqZ9XCcDuZ7",_t="TYB4Y2xQujO7cifhHush",Gt="YJlizbhw6DBPHT9OYbdj",Xt="klz_XuZpllvTMzpJF1gw",jt="TfjbWiK8hca4HHEBnonP",Ht="kR0M2WSYVUj4cohADSFM",Wt="ghfuv80I8uW_ymG_jfx9",Yt="jtfSxoRam9rzTtdXIjzc",qt="fejGrhq7pxGC99cUdyVw",Zt="T0OjvsNXAJJGd23eBG2m",Vt=({spec:e})=>{const t=(0,Ae.$P)(),{canSort:a,canFilter:r}=(0,q.zZ)().capabilities,l=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),i=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return n.createElement("div",{className:Ht},r&&n.createElement("div",{className:Yt},n.createElement(Lt,{onFilter:l})),!r&&n.createElement(m.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:qt},o.ag.get("mwp.podcast.all.episodes")),a&&n.createElement("div",{className:Wt},n.createElement(Ot,{onSort:i})))},Kt=({metadata:e,showId:t,spec:a})=>{const{uri:r,trailer:i,topics:s,description:c,htmlDescription:u}=e,g=(0,Ae.$P)(),E=(0,n.useMemo)((()=>a.episodeListFactory()),[a]),p=(0,d.o)(),y=(0,l.W6)(at.Cz),k=(0,yt.g)(),{sortState:h}=(0,n.useContext)(Nt),{sortState:f}=(0,n.useContext)(Pt),b=(0,q.zZ)(),{usePlayContextItem:v}=(0,W.n)({uri:r,metadata:{[ft.sb.SORTING_CRITERIA]:b.getPlayerSort(h),[ft.sb.FILTERING_PREDICATE]:b.getPlayerFilter(f)}},{featureIdentifier:"show"}),{isActive:C,isPlaying:S,togglePlay:w}=v({uri:i?.uri||""}),A=(0,n.useCallback)((e=>{p({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();g.logInteraction(n)}),[g,p,a]),I=(0,n.useCallback)(((e,t)=>{const n=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});g.logInteraction(n)}),[g,a]),R=(0,bt.e)(e),U=(0,kt.s)(i,R),D=(0,n.useCallback)((()=>{i?.uri&&(k?U():(p({targetUri:i.uri,intent:S?"play":"pause",type:"click"}),w()))}),[U,k,S,p,w,i?.uri]),F=s.length>0,M=c||y&&u,z=M||F;return n.createElement("div",{className:_t},n.createElement("div",{className:Gt},z&&n.createElement(n.Fragment,null,n.createElement(m.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:qt},o.ag.get("artist.about")),M&&n.createElement(ee.o,{maxLines:4,content:(c||"").trim(),onExpanded:A,htmlContent:y&&u?u:void 0,LinkComponent:Z.Z}),F&&n.createElement(Q,{topics:s,onClick:I})),n.createElement(Et,{showId:t,uri:r}),i&&n.createElement(ht._,{menu:n.createElement(pt.k,{uri:i.uri,showUri:r,sharingInfo:i.sharingInfo})},n.createElement(X,{label:o.ag.get("track-trailer"),className:Zt,images:i.coverArt||[],title:i.name,duration:i.duration.milliseconds,moreButton:n.createElement(N.y,{menu:n.createElement(pt.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:r})},n.createElement(P.z,null)),onClick:D,isPlaying:S,isActive:C,size:G.LARGE,contentRating:i.contentRating?.label}))),n.createElement("div",{className:jt,"data-testid":"show-all-episode-list"},n.createElement(Vt,{spec:a}),n.createElement(Ae.Nh,{spec:E},n.createElement(Dt,{showMetadata:e,usePlayContextItem:v}))),n.createElement(x.k,{copyrights:[]}))};var $t=a(51775);const Jt=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:l,podcastType:i,publisherName:s}=e,{isXSOnly:c,isSMOnly:m}=(0,$t.e)(),u=c||m;return n.createElement(ye.gF,{backgroundColor:t},n.createElement(ke.W,null,n.createElement(he.i,{text:l,dragUri:a,dragLabel:l})),n.createElement("div",{className:Xt},n.createElement(ht._,{menu:n.createElement(mt.M,{uri:a})},n.createElement(ye.Oe,{loading:"eager",name:l,images:r,placeholderType:"show",shape:ye.Kc.ROUNDED_CORNERS}))),n.createElement(ye.sP,null,n.createElement(ye.dy,{small:!0,uppercase:!0},"SHOW"===i?o.ag.get("type.show"):o.ag.get("type.podcast")),n.createElement(ht._,{menu:n.createElement(mt.M,{uri:a})},n.createElement(ye.xd,{dragUri:a,dragLabel:l},n.createElement("span",{"data-testid":"show-title"},l))),n.createElement(ye.dy,{large:!u,medium:u,bold:!0},s)))};var Qt=a(46877),ea=a(16061),ta=a(19480);const aa={totalCount:0,nextOffset:0,items:[]};const na=({metadata:e})=>{const t=function(e){const t=(0,q.zZ)(),[a,r]=(0,n.useState)(aa),l=(0,n.useCallback)((async()=>{const a=await t.getContents(e,{offset:0,limit:50});r(a)}),[e,t]);return(0,n.useEffect)((()=>{l()}),[l]),a}(e.uri);return n.createElement(ta.P,{className:"contentSpacing",total:t.items.length,title:Qt.ag.get("episodes"),showAll:!0},t.items.map(((e,t)=>n.createElement(ea.B,{key:e.uri,index:t,uri:e.uri,name:e.name,images:e.coverArt,showImages:[],durationMilliseconds:e.duration.milliseconds,releaseDate:e.releaseDate?.isoString,resume_point:null,description:e.description,isExplicit:!1,is19PlusOnly:!1,sharingInfo:e.sharingInfo}))))},ra=({metadata:e})=>n.createElement("section",null,n.createElement(s.$,null,"Podcasts from the user"),n.createElement(na,{metadata:e})),la=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:c}=(0,Ae.fU)(i.createDesktopPodcastEventFactory,{data:{uri:l}}),m=(0,n.useMemo)((()=>c.actionBarFactory()),[c]),u=(0,H.Z)(a[0]?.url||null);return n.createElement("section",{className:Tt},n.createElement(s.$,null,o.ag.get("podcasts.show.seo.title",{name:r})),n.createElement(Jt,{metadata:e,backgroundColor:u}),n.createElement(dt,{uri:l,name:r,backgroundColor:u,spec:m}),n.createElement(Kt,{metadata:e,showId:t,spec:c}))},ia=n.memo((function(){const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,l.W6)(at.uB),i=(0,l.W6)(at.zR),s=(0,nt.l)(t,a,i);return s?(0,De.l6)(s)?n.createElement(n.Suspense,{fallback:null},n.createElement(tt,{metadata:s})):(0,De.MP)(s)?n.createElement(n.Suspense,{fallback:null},n.createElement(ra,{metadata:s})):n.createElement(n.Suspense,{fallback:null},n.createElement(wt,{uri:s.uri},n.createElement(At,{uri:s.uri,defaultSortParam:ct(s.consumptionOrder)},n.createElement(la,{showId:e,metadata:s})))):n.createElement(c.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.podcast")})}))},94233:(e,t,a)=>{a.d(t,{k:()=>i});var n=a(67294),r=a(28760);const l="rTMkDBDp47Eo12ZEQv4U",i=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let l;return l="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,n.createElement(r.Dy,{as:"p",variant:"finale",key:t,dir:"auto"},`${l} ${a}`)}));return t&&a.unshift(n.createElement(r.Dy,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:l},a)}},14535:(e,t,a)=>{a.d(t,{e:()=>m});var n=a(67294),r=a(96206),l=a(94184),i=a.n(l);const o="aAr9nYtPsG7P2LRzciXc",s="fBTYgGyvIbHizHIj7AAX",c="oUzIIkcyBdRs7hrwbwIo",m=n.memo((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:l}){const m=e?r.ag.get("following"):r.ag.get("follow");return n.createElement("button",{type:"button",className:i()(o,{[s]:e,[c]:a}),onClick:t},l||m)}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map